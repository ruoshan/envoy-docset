

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Role Based Access Control (RBAC) &mdash; envoy tag-v1.7.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Health checkers" href="../../health_checker/health_checker.html" />
    <link rel="prev" title="RBAC" href="../rbac.html" /> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                tag-v1.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api-v1/api.html">v1 API reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../api.html">v2 API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../config.html">Extensions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../filter/filter.html">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../rbac.html">RBAC</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Role Based Access Control (RBAC)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../transport_socket/transport_socket.html">Transport sockets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../service/service.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../api.html">v2 API reference</a> &raquo;</li>
        
          <li><a href="../../config.html">Extensions</a> &raquo;</li>
        
          <li><a href="../rbac.html">RBAC</a> &raquo;</li>
        
      <li>Role Based Access Control (RBAC)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v2/config/rbac/v2alpha/rbac.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="role-based-access-control-rbac">
<span id="envoy-api-file-envoy-config-rbac-v2alpha-rbac-proto"></span><h1>Role Based Access Control (RBAC)<a class="headerlink" href="#role-based-access-control-rbac" title="Permalink to this headline">¶</a></h1>
<div class="section" id="config-rbac-v2alpha-rbac">
<span id="envoy-api-msg-config-rbac-v2alpha-rbac"></span><h2>config.rbac.v2alpha.RBAC<a class="headerlink" href="#config-rbac-v2alpha-rbac" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L47">[config.rbac.v2alpha.RBAC proto]</a></p>
<p>Role Based Access Control (RBAC) provides service-level and method-level access control for a
service. RBAC policies are additive. The policies are examined in order. A request is allowed
once a matching policy is found (suppose the <cite>action</cite> is ALLOW).</p>
<p>Here is an example of RBAC configuration. It has two policies:</p>
<ul class="simple">
<li>Service account “cluster.local/ns/default/sa/admin” has full access (empty permission entry
means full access) to the service.</li>
<li>Any user (empty principal entry means any user) can read (“GET”) the service at paths with
prefix “/products” or suffix “/reviews” when request header “version” set to either “v1” or
“v2”.</li>
</ul>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ALLOW</span>
<span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="s">&quot;service-admin&quot;</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">permissions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">any</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">principals</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">authenticated</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster.local/ns/default/sa/admin&quot;</span> <span class="p p-Indicator">}</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">authenticated</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster.local/ns/default/sa/superuser&quot;</span> <span class="p p-Indicator">}</span>
  <span class="s">&quot;product-viewer&quot;</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">permissions</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">and_rules</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">header</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;:method&quot;</span><span class="p p-Indicator">,</span> <span class="nv">exact_match</span><span class="p p-Indicator">:</span> <span class="s">&quot;GET&quot;</span> <span class="p p-Indicator">}</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">header</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;:path&quot;</span><span class="p p-Indicator">,</span> <span class="nv">regex_match</span><span class="p p-Indicator">:</span> <span class="s">&quot;/products(/.*)?&quot;</span> <span class="p p-Indicator">}</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">or_rules</span><span class="p p-Indicator">:</span>
                  <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">destination_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">destination_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
    <span class="l l-Scalar l-Scalar-Plain">principals</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">any</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div></blockquote>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;policies&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-rbac-action">
<dt>action</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-enum-config-rbac-v2alpha-rbac-action"><span class="std std-ref">config.rbac.v2alpha.RBAC.Action</span></a>) The action to take if a policy matches. The request is allowed if and only if:</p>
<blockquote class="last">
<div><ul class="simple">
<li><cite>action</cite> is “ALLOWED” and at least one policy matches</li>
<li><cite>action</cite> is “DENY” and none of the policies match</li>
</ul>
</div></blockquote>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-rbac-policies">
<dt>policies</dt>
<dd>(map&lt;<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-policy"><span class="std std-ref">config.rbac.v2alpha.Policy</span></a>&gt;) Maps from policy name to policy. A match occurs when at least one policy matches the request.</dd>
</dl>
</div>
<div class="section" id="enum-config-rbac-v2alpha-rbac-action">
<span id="envoy-api-enum-config-rbac-v2alpha-rbac-action"></span><h2>Enum config.rbac.v2alpha.RBAC.Action<a class="headerlink" href="#enum-config-rbac-v2alpha-rbac-action" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L49">[config.rbac.v2alpha.RBAC.Action proto]</a></p>
<p>Should we do safe-list or block-list style access control?</p>
<dl class="docutils" id="envoy-api-enum-value-config-rbac-v2alpha-rbac-action-allow">
<dt>ALLOW</dt>
<dd><em>(DEFAULT)</em> ⁣The policies grant access to principals. The rest is denied. This is safe-list style
access control. This is the default type.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-config-rbac-v2alpha-rbac-action-deny">
<dt>DENY</dt>
<dd>⁣The policies deny access to principals. The rest is allowed. This is block-list style
access control.</dd>
</dl>
</div>
<div class="section" id="config-rbac-v2alpha-policy">
<span id="envoy-api-msg-config-rbac-v2alpha-policy"></span><h2>config.rbac.v2alpha.Policy<a class="headerlink" href="#config-rbac-v2alpha-policy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L72">[config.rbac.v2alpha.Policy proto]</a></p>
<p>Policy specifies a role and the principals that are assigned/denied the role. A policy matches if
and only if at least one of its permissions match the action taking place AND at least one of its
principals match the downstream.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;principals&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-policy-permissions">
<dt>permissions</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-permission"><span class="std std-ref">config.rbac.v2alpha.Permission</span></a>, <em>REQUIRED</em>) Required. The set of permissions that define a role. Each permission is matched with OR
semantics. To match all actions for this policy, a single Permission with the <cite>any</cite> field set
to true should be used.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-policy-principals">
<dt>principals</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-principal"><span class="std std-ref">config.rbac.v2alpha.Principal</span></a>, <em>REQUIRED</em>) Required. The set of principals that are assigned/denied the role based on “action”. Each
principal is matched with OR semantics. To match all downstreams for this policy, a single
Principal with the <cite>any</cite> field set to true should be used.</dd>
</dl>
</div>
<div class="section" id="config-rbac-v2alpha-permission">
<span id="envoy-api-msg-config-rbac-v2alpha-permission"></span><h2>config.rbac.v2alpha.Permission<a class="headerlink" href="#config-rbac-v2alpha-permission" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L85">[config.rbac.v2alpha.Permission proto]</a></p>
<p>Permission defines an action (or actions) that a principal can take.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;and_rules&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;or_rules&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;any&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;header&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;destination_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;destination_port&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-and-rules">
<dt>and_rules</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-permission-set"><span class="std std-ref">config.rbac.v2alpha.Permission.Set</span></a>) A set of rules that all must match in order to define the action.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-and-rules"><span class="std std-ref">and_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-or-rules"><span class="std std-ref">or_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-ip"><span class="std std-ref">destination_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-port"><span class="std std-ref">destination_port</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-or-rules">
<dt>or_rules</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-permission-set"><span class="std std-ref">config.rbac.v2alpha.Permission.Set</span></a>) A set of rules where at least one must match in order to define the action.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-and-rules"><span class="std std-ref">and_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-or-rules"><span class="std std-ref">or_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-ip"><span class="std std-ref">destination_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-port"><span class="std std-ref">destination_port</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-any">
<dt>any</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When any is set, it matches any action.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-and-rules"><span class="std std-ref">and_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-or-rules"><span class="std std-ref">or_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-ip"><span class="std std-ref">destination_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-port"><span class="std std-ref">destination_port</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-header">
<dt>header</dt>
<dd><p class="first">(<a class="reference internal" href="../../../api/v2/route/route.proto.html#envoy-api-msg-route-headermatcher"><span class="std std-ref">route.HeaderMatcher</span></a>) A header (or psuedo-header such as :path or :method) on the incoming HTTP request.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-and-rules"><span class="std std-ref">and_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-or-rules"><span class="std std-ref">or_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-ip"><span class="std std-ref">destination_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-port"><span class="std std-ref">destination_port</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-destination-ip">
<dt>destination_ip</dt>
<dd><p class="first">(<a class="reference internal" href="../../../api/v2/core/address.proto.html#envoy-api-msg-core-cidrrange"><span class="std std-ref">core.CidrRange</span></a>) A CIDR block that describes the destination IP.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-and-rules"><span class="std std-ref">and_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-or-rules"><span class="std std-ref">or_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-ip"><span class="std std-ref">destination_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-port"><span class="std std-ref">destination_port</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-destination-port">
<dt>destination_port</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) A port number that describes the destination port connecting to.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-and-rules"><span class="std std-ref">and_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-or-rules"><span class="std std-ref">or_rules</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-ip"><span class="std std-ref">destination_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-permission-destination-port"><span class="std std-ref">destination_port</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="config-rbac-v2alpha-permission-set">
<span id="envoy-api-msg-config-rbac-v2alpha-permission-set"></span><h2>config.rbac.v2alpha.Permission.Set<a class="headerlink" href="#config-rbac-v2alpha-permission-set" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L89">[config.rbac.v2alpha.Permission.Set proto]</a></p>
<p>Used in the <cite>and_rules</cite> and <cite>or_rules</cite> fields in the <cite>rule</cite> oneof. Depending on the context,
each are applied with the associated behavior.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-permission-set-rules">
<dt>rules</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-permission"><span class="std std-ref">config.rbac.v2alpha.Permission</span></a>, <em>REQUIRED</em>)</dd>
</dl>
</div>
<div class="section" id="config-rbac-v2alpha-principal">
<span id="envoy-api-msg-config-rbac-v2alpha-principal"></span><h2>config.rbac.v2alpha.Principal<a class="headerlink" href="#config-rbac-v2alpha-principal" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L117">[config.rbac.v2alpha.Principal proto]</a></p>
<p>Principal defines an identity or a group of identities for a downstream subject.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;and_ids&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;or_ids&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;any&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;authenticated&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;source_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;header&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-and-ids">
<dt>and_ids</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-principal-set"><span class="std std-ref">config.rbac.v2alpha.Principal.Set</span></a>) A set of identifiers that all must match in order to define the downstream.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-and-ids"><span class="std std-ref">and_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-or-ids"><span class="std std-ref">or_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">authenticated</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-source-ip"><span class="std std-ref">source_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-header"><span class="std std-ref">header</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-or-ids">
<dt>or_ids</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-principal-set"><span class="std std-ref">config.rbac.v2alpha.Principal.Set</span></a>) A set of identifiers at least one must match in order to define the downstream.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-and-ids"><span class="std std-ref">and_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-or-ids"><span class="std std-ref">or_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">authenticated</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-source-ip"><span class="std std-ref">source_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-header"><span class="std std-ref">header</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-any">
<dt>any</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When any is set, it matches any downstream.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-and-ids"><span class="std std-ref">and_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-or-ids"><span class="std std-ref">or_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">authenticated</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-source-ip"><span class="std std-ref">source_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-header"><span class="std std-ref">header</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-authenticated">
<dt>authenticated</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">config.rbac.v2alpha.Principal.Authenticated</span></a>) Authenticated attributes that identify the downstream.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-and-ids"><span class="std std-ref">and_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-or-ids"><span class="std std-ref">or_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">authenticated</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-source-ip"><span class="std std-ref">source_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-header"><span class="std std-ref">header</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-source-ip">
<dt>source_ip</dt>
<dd><p class="first">(<a class="reference internal" href="../../../api/v2/core/address.proto.html#envoy-api-msg-core-cidrrange"><span class="std std-ref">core.CidrRange</span></a>) A CIDR block that describes the downstream IP.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-and-ids"><span class="std std-ref">and_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-or-ids"><span class="std std-ref">or_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">authenticated</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-source-ip"><span class="std std-ref">source_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-header"><span class="std std-ref">header</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-header">
<dt>header</dt>
<dd><p class="first">(<a class="reference internal" href="../../../api/v2/route/route.proto.html#envoy-api-msg-route-headermatcher"><span class="std std-ref">route.HeaderMatcher</span></a>) A header (or psuedo-header such as :path or :method) on the incoming HTTP request.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-and-ids"><span class="std std-ref">and_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-or-ids"><span class="std std-ref">or_ids</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-any"><span class="std std-ref">any</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-authenticated"><span class="std std-ref">authenticated</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-source-ip"><span class="std std-ref">source_ip</span></a>, <a class="reference internal" href="#envoy-api-field-config-rbac-v2alpha-principal-header"><span class="std std-ref">header</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="config-rbac-v2alpha-principal-set">
<span id="envoy-api-msg-config-rbac-v2alpha-principal-set"></span><h2>config.rbac.v2alpha.Principal.Set<a class="headerlink" href="#config-rbac-v2alpha-principal-set" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L121">[config.rbac.v2alpha.Principal.Set proto]</a></p>
<p>Used in the <cite>and_ids</cite> and <cite>or_ids</cite> fields in the <cite>identifier</cite> oneof. Depending on the context,
each are applied with the associated behavior.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;ids&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-set-ids">
<dt>ids</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-rbac-v2alpha-principal"><span class="std std-ref">config.rbac.v2alpha.Principal</span></a>, <em>REQUIRED</em>)</dd>
</dl>
</div>
<div class="section" id="config-rbac-v2alpha-principal-authenticated">
<span id="envoy-api-msg-config-rbac-v2alpha-principal-authenticated"></span><h2>config.rbac.v2alpha.Principal.Authenticated<a class="headerlink" href="#config-rbac-v2alpha-principal-authenticated" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/config/rbac/v2alpha/rbac.proto#L126">[config.rbac.v2alpha.Principal.Authenticated proto]</a></p>
<p>Authentication attributes for a downstream.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-rbac-v2alpha-principal-authenticated-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The name of the principal. If set, the URI SAN is used from the certificate, otherwise the
subject field is used. If unset, it applies to any user that is authenticated.</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../health_checker/health_checker.html" class="btn btn-neutral float-right" title="Health checkers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../rbac.html" class="btn btn-neutral" title="RBAC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Envoy Project Authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'tag-v1.7.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>