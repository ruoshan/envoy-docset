

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Common discovery API components &mdash; envoy tag-v1.7.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Configuration sources" href="core/config_source.proto.html" />
    <link rel="prev" title="Protocol options" href="core/protocol.proto.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                tag-v1.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api-v1/api.html">v1 API reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../api.html">v2 API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config/config.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/admin.html">Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data/data.html">Envoy data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../service/service.html">Services</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../common_messages/common_messages.html">Common messages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core/base.proto.html">Common types</a></li>
<li class="toctree-l3"><a class="reference internal" href="core/address.proto.html">Network addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="core/protocol.proto.html">Protocol options</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Common discovery API components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#discoveryrequest">DiscoveryRequest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#discoveryresponse">DiscoveryResponse</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core/config_source.proto.html">Configuration sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="core/grpc_service.proto.html">gRPC services</a></li>
<li class="toctree-l3"><a class="reference internal" href="core/http_uri.proto.html">HTTP Service URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth/cert.proto.html">Common TLS configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="ratelimit/ratelimit.proto.html">Common rate limit components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../api.html">v2 API reference</a> &raquo;</li>
        
          <li><a href="../../common_messages/common_messages.html">Common messages</a> &raquo;</li>
        
      <li>Common discovery API components</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/api-v2/api/v2/discovery.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="common-discovery-api-components">
<span id="envoy-api-file-envoy-api-v2-discovery-proto"></span><h1>Common discovery API components<a class="headerlink" href="#common-discovery-api-components" title="Permalink to this headline">¶</a></h1>
<div class="section" id="discoveryrequest">
<span id="envoy-api-msg-discoveryrequest"></span><h2>DiscoveryRequest<a class="headerlink" href="#discoveryrequest" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/api/v2/discovery.proto#L17">[DiscoveryRequest proto]</a></p>
<p>A DiscoveryRequest requests a set of versioned resources of the same type for
a given Envoy node on some API.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version_info&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;node&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;resource_names&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;type_url&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_nonce&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;error_detail&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-discoveryrequest-version-info">
<dt>version_info</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The version_info provided in the request messages will be the version_info
received with the most recent successfully processed response or empty on
the first request. It is expected that no new request is sent after a
response is received until the Envoy instance is ready to ACK/NACK the new
configuration. ACK/NACK takes place by returning the new API config version
as applied or the previous API config version respectively. Each type_url
(see below) has an independent version associated with it.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryrequest-node">
<dt>node</dt>
<dd>(<a class="reference internal" href="core/base.proto.html#envoy-api-msg-core-node"><span class="std std-ref">core.Node</span></a>) The node making the request.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryrequest-resource-names">
<dt>resource_names</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) List of resources to subscribe to, e.g. list of cluster names or a route
configuration name. If this is empty, all resources for the API are
returned. LDS/CDS expect empty resource_names, since this is global
discovery for the Envoy instance. The LDS and CDS responses will then imply
a number of resources that need to be fetched via EDS/RDS, which will be
explicitly enumerated in resource_names.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryrequest-type-url">
<dt>type_url</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Type of the resource that is being requested, e.g.
“type.googleapis.com/envoy.api.v2.ClusterLoadAssignment”. This is implicit
in requests made via singleton xDS APIs such as CDS, LDS, etc. but is
required for ADS.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryrequest-response-nonce">
<dt>response_nonce</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) nonce corresponding to DiscoveryResponse being ACK/NACKed. See above
discussion on version_info and the DiscoveryResponse nonce comment. This
may be empty if no nonce is available, e.g. at startup or for non-stream
xDS implementations.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryrequest-error-detail">
<dt>error_detail</dt>
<dd>(<a class="reference external" href="https://cloud.google.com/natural-language/docs/reference/rpc/google.rpc#status">Status</a>) This is populated when the previous <a class="reference internal" href="#envoy-api-msg-discoveryresponse"><span class="std std-ref">DiscoveryResponse</span></a>
failed to update configuration. The <em>message</em> field in <em>error_details</em> provides the Envoy
internal exception related to the failure. It is only intended for consumption during manual
debugging, the string provided is not guaranteed to be stable across Envoy versions.</dd>
</dl>
</div>
<div class="section" id="discoveryresponse">
<span id="envoy-api-msg-discoveryresponse"></span><h2>DiscoveryResponse<a class="headerlink" href="#discoveryresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/api/v2/discovery.proto#L57">[DiscoveryResponse proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version_info&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;type_url&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;nonce&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-discoveryresponse-version-info">
<dt>version_info</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The version of the response data.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryresponse-resources">
<dt>resources</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#any">Any</a>) The response resources. These resources are typed and depend on the API being called.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryresponse-type-url">
<dt>type_url</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Type URL for resources. This must be consistent with the type_url in the
Any messages for resources if resources is non-empty. This effectively
identifies the xDS API when muxing over ADS.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-discoveryresponse-nonce">
<dt>nonce</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) For gRPC based subscriptions, the nonce provides a way to explicitly ack a
specific DiscoveryResponse in a following DiscoveryRequest. Additional
messages may have been sent by Envoy to the management server for the
previous version on the stream prior to this DiscoveryResponse, that were
unprocessed at response send time. The nonce allows the management server
to ignore any further DiscoveryRequests for the previous version until a
DiscoveryRequest bearing the nonce. The nonce is optional and is not
required for non-stream based xDS implementations.</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="core/config_source.proto.html" class="btn btn-neutral float-right" title="Configuration sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="core/protocol.proto.html" class="btn btn-neutral" title="Protocol options" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Envoy Project Authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'tag-v1.7.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>