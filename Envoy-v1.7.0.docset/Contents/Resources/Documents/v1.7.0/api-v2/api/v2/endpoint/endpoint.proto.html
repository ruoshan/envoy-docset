

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Endpoints &mdash; envoy tag-v1.7.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="EDS" href="../eds.proto.html" />
    <link rel="prev" title="Circuit breakers" href="../cluster/circuit_breaker.proto.html" /> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                tag-v1.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api-v1/api.html">v1 API reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../api.html">v2 API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../cds.proto.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cluster/outlier_detection.proto.html">Outlier detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cluster/circuit_breaker.proto.html">Circuit breakers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Endpoints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#endpoint-endpoint">endpoint.Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="#endpoint-lbendpoint">endpoint.LbEndpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="#endpoint-localitylbendpoints">endpoint.LocalityLbEndpoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../eds.proto.html">EDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/health_check.proto.html">Health check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config/config.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../service/service.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../api.html">v2 API reference</a> &raquo;</li>
        
          <li><a href="../../../clusters/clusters.html">Clusters</a> &raquo;</li>
        
      <li>Endpoints</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v2/api/v2/endpoint/endpoint.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="endpoints">
<span id="envoy-api-file-envoy-api-v2-endpoint-endpoint-proto"></span><h1>Endpoints<a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h1>
<div class="section" id="endpoint-endpoint">
<span id="envoy-api-msg-endpoint-endpoint"></span><h2>endpoint.Endpoint<a class="headerlink" href="#endpoint-endpoint" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/api/v2/endpoint/endpoint.proto#L19">[endpoint.Endpoint proto]</a></p>
<p>Upstream host identifier.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-endpoint-endpoint-address">
<dt>address</dt>
<dd><p class="first">(<a class="reference internal" href="../core/address.proto.html#envoy-api-msg-core-address"><span class="std std-ref">core.Address</span></a>) The upstream host address.</p>
<div class="last admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The form of host address depends on the given cluster type. For STATIC or EDS,
it is expected to be a direct IP address (or something resolvable by the
specified <a class="reference internal" href="../core/address.proto.html#envoy-api-field-core-socketaddress-resolver-name"><span class="std std-ref">resolver</span></a>
in the Address). For LOGICAL or STRICT DNS, it is expected to be hostname,
and will be resolved via DNS.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="endpoint-lbendpoint">
<span id="envoy-api-msg-endpoint-lbendpoint"></span><h2>endpoint.LbEndpoint<a class="headerlink" href="#endpoint-lbendpoint" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/api/v2/endpoint/endpoint.proto#L53">[endpoint.LbEndpoint proto]</a></p>
<p>An Endpoint that Envoy can route traffic to.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;health_status&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;load_balancing_weight&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-endpoint-lbendpoint-endpoint">
<dt>endpoint</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-endpoint-endpoint"><span class="std std-ref">endpoint.Endpoint</span></a>) Upstream host identifier</dd>
</dl>
<dl class="docutils" id="envoy-api-field-endpoint-lbendpoint-health-status">
<dt>health_status</dt>
<dd>(<a class="reference internal" href="../core/health_check.proto.html#envoy-api-enum-core-healthstatus"><span class="std std-ref">core.HealthStatus</span></a>) Optional health status when known and supplied by EDS server.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-endpoint-lbendpoint-metadata">
<dt>metadata</dt>
<dd>(<a class="reference internal" href="../core/base.proto.html#envoy-api-msg-core-metadata"><span class="std std-ref">core.Metadata</span></a>) The endpoint metadata specifies values that may be used by the load
balancer to select endpoints in a cluster for a given request. The filter
name should be specified as <em>envoy.lb</em>. An example boolean key-value pair
is <em>canary</em>, providing the optional canary status of the upstream host.
This may be matched against in a route’s ForwardAction metadata_match field
to subset the endpoints considered in cluster load balancing.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-endpoint-lbendpoint-load-balancing-weight">
<dt>load_balancing_weight</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The optional load balancing weight of the upstream host, in the range 1 -
128. Envoy uses the load balancing weight in some of the built in load
balancers. The load balancing weight for an endpoint is divided by the sum
of the weights of all endpoints in the endpoint’s locality to produce a
percentage of traffic for the endpoint. This percentage is then further
weighted by the endpoint’s locality’s load balancing weight from
LocalityLbEndpoints. If unspecified, each host is presumed to have equal
weight in a locality.</p>
<div class="last admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The limit of 128 is somewhat arbitrary, but is applied due to performance
concerns with the current implementation and can be removed when
<a class="reference external" href="https://github.com/envoyproxy/envoy/issues/1285">this issue</a> is fixed.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="endpoint-localitylbendpoints">
<span id="envoy-api-msg-endpoint-localitylbendpoints"></span><h2>endpoint.LocalityLbEndpoints<a class="headerlink" href="#endpoint-localitylbendpoints" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/api/v2/endpoint/endpoint.proto#L90">[endpoint.LocalityLbEndpoints proto]</a></p>
<p>A group of endpoints belonging to a Locality.
One can have multiple LocalityLbEndpoints for a locality, but this is
generally only done if the different groups need to have different load
balancing weights or different priorities.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;locality&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lb_endpoints&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;load_balancing_weight&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;priority&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-endpoint-localitylbendpoints-locality">
<dt>locality</dt>
<dd>(<a class="reference internal" href="../core/base.proto.html#envoy-api-msg-core-locality"><span class="std std-ref">core.Locality</span></a>) Identifies location of where the upstream hosts run.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-endpoint-localitylbendpoints-lb-endpoints">
<dt>lb_endpoints</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-endpoint-lbendpoint"><span class="std std-ref">endpoint.LbEndpoint</span></a>) The group of endpoints belonging to the locality specified.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-endpoint-localitylbendpoints-load-balancing-weight">
<dt>load_balancing_weight</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Optional: Per priority/region/zone/sub_zone weight - range 1-128. The load
balancing weight for a locality is divided by the sum of the weights of all
localities  at the same priority level to produce the effective percentage
of traffic for the locality.</p>
<p>Locality weights are only considered when <a class="reference internal" href="../../../../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-locality-weighted-lb"><span class="std std-ref">locality weighted load
balancing</span></a> is
configured. These weights are ignored otherwise. If no weights are
specificed when locality weighted load balancing is enabled, the cluster is
assumed to have a weight of 1.</p>
<div class="last admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The limit of 128 is somewhat arbitrary, but is applied due to performance
concerns with the current implementation and can be removed when
<a class="reference external" href="https://github.com/envoyproxy/envoy/issues/1285">this issue</a> is fixed.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-endpoint-localitylbendpoints-priority">
<dt>priority</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) Optional: the priority for this LocalityLbEndpoints. If unspecified this will
default to the highest priority (0).</p>
<p>Under usual circumstances, Envoy will only select endpoints for the highest
priority (0). In the event all endpoints for a particular priority are
unavailable/unhealthy, Envoy will fail over to selecting endpoints for the
next highest priority group.</p>
<p class="last">Priorities should range from 0 (highest) to N (lowest) without skipping.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../eds.proto.html" class="btn btn-neutral float-right" title="EDS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../cluster/circuit_breaker.proto.html" class="btn btn-neutral" title="Circuit breakers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Envoy Project Authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'tag-v1.7.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>