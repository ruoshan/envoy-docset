

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; envoy tag-v1.9.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Supported load balancers" href="load_balancers.html" />
    <link rel="prev" title="Load Balancing" href="load_balancing.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                tag-v1.9.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../intro.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../what_is_envoy.html">What is Envoy</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../arch_overview.html">Architecture overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../terminology.html">Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../threading_model.html">Threading model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../listener_filters.html">Listener filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_filters.html">Network (L3/L4) filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http_connection_management.html">HTTP connection management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http_filters.html">HTTP filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_sharing_between_filters.html">Static State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_sharing_between_filters.html#dynamic-state">Dynamic State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http_routing.html">HTTP routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../grpc.html">gRPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../websocket.html">WebSocket and HTTP upgrades</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cluster_manager.html">Cluster manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../service_discovery.html">Service discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../health_checking.html">Health checking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connection_pooling.html">Connection pooling</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="load_balancing.html">Load Balancing</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="load_balancers.html">Supported load balancers</a></li>
<li class="toctree-l4"><a class="reference internal" href="original_dst.html">Original destination</a></li>
<li class="toctree-l4"><a class="reference internal" href="overprovisioning.html">Overprovisioning Factor</a></li>
<li class="toctree-l4"><a class="reference internal" href="priority.html">Priority levels</a></li>
<li class="toctree-l4"><a class="reference internal" href="zone_aware.html">Zone aware routing</a></li>
<li class="toctree-l4"><a class="reference internal" href="panic_threshold.html">Panic threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="locality_weight.html">Locality weighted load balancing</a></li>
<li class="toctree-l4"><a class="reference internal" href="subsets.html">Load Balancer Subsets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../outlier.html">Outlier detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../circuit_breaking.html">Circuit breaking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../global_rate_limiting.html">Global rate limiting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ssl.html">TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../statistics.html">Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runtime.html">Runtime configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tracing.html">Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcp_proxy.html">TCP proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../access_logging.html">Access logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mongo.html">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dynamo.html">DynamoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../redis.html">Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hot_restart.html">Hot restart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dynamic_configuration.html">Dynamic configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../init.html">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../draining.html">Draining</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scripting.html">Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ext_authz_filter.html">External Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../overload_manager.html">Overload manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../deployment_types/deployment_types.html">Deployment types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../comparison.html">Comparison to similar systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_help.html">Getting help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../version_history.html">Version history</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api-v2/api.html">v2 API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../intro.html">Introduction</a> &raquo;</li>
        
          <li><a href="../arch_overview.html">Architecture overview</a> &raquo;</li>
        
          <li><a href="load_balancing.html">Load Balancing</a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/intro/arch_overview/load_balancing/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="overview">
<span id="arch-overview-load-balancing"></span><h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-load-balancing">
<h2>What is Load Balancing?<a class="headerlink" href="#what-is-load-balancing" title="Permalink to this headline">¶</a></h2>
<p>Load balancing is a way of distributing traffic between multiple hosts within a single upstream cluster in order to effectively make use of available resources. There are many different ways
of accomplishing this, so Envoy provides several different load balancing strategies.
At a high level, we can break these strategies into two categories: global
load balancing and distributed load balancing.</p>
</div>
<div class="section" id="distributed-load-balancing">
<span id="arch-overview-load-balancing-distributed-lb"></span><h2>Distributed Load Balancing<a class="headerlink" href="#distributed-load-balancing" title="Permalink to this headline">¶</a></h2>
<p>Distributed load balancing refers to having Envoy itself deteremine how load should be distributed
to the endpoints based on knowing the location of the upstream hosts.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../health_checking.html#arch-overview-health-checking"><span class="std std-ref">Active health checking</span></a>: by health checking upstream
hosts, Envoy can adjust the weights of priorities and localities to account for unavailable
hosts.</li>
<li><a class="reference internal" href="zone_aware.html#arch-overview-load-balancing-zone-aware-routing"><span class="std std-ref">Zone aware routing</span></a>: this can be used
to make Envoy prefer closer endpoints without having to explicitly configure priorities in the
control plane.</li>
<li><a class="reference internal" href="load_balancers.html#arch-overview-load-balancing-types"><span class="std std-ref">Load balancing algorithms</span></a>: Envoy can use several
different algorithms to use the provided weights to determine which host to select.</li>
</ul>
</div>
</div>
<div class="section" id="global-load-balancing">
<span id="arch-overview-load-balancing-global-lb"></span><h2>Global Load Balancing<a class="headerlink" href="#global-load-balancing" title="Permalink to this headline">¶</a></h2>
<p>Global load balancing refers to having a single, global authority that decides how load should
be distributed between hosts. For Envoy, this would be done by the control plane, which is able
to adjust the load applied to individual endpoints by specifying various parameters, such as
priority, locality weight, endpoint weight and endpoint health.</p>
<p>A simple example would be to have the control plane assign hosts to different
<a class="reference internal" href="priority.html#arch-overview-load-balancing-priority-levels"><span class="std std-ref">priorities</span></a> based on network topology
to ensure that hosts that require fewer network hops are preferred. This is similar to
zone-aware routing, but is handled by the control plane instead of by Envoy. A benefit of doing
it in the control plane is that it gets around some of the
<a class="reference internal" href="zone_aware.html#arch-overview-load-balancing-zone-aware-routing-preconditions"><span class="std std-ref">limitations</span></a> of zone aware routing.</p>
<p>A more complicated setup could have resource usage being reported to the control plane, allowing
it to adjust the weight of endpoints or <a class="reference internal" href="locality_weight.html#arch-overview-load-balancing-locality-weighted-lb"><span class="std std-ref">localities</span></a>
to account for the current resource usage, attempting to route new requests to idle hosts over busy ones.</p>
</div>
<div class="section" id="both-distributed-and-global">
<h2>Both Distributed and Global<a class="headerlink" href="#both-distributed-and-global" title="Permalink to this headline">¶</a></h2>
<p>Most sophisticated deployments will make use of features from both categories. For instance, global load
balancing could be used to define the high level routing priorities and weights, while distributed load balancing
could be used to react to changes in the system (e.g. using active health checking). By combining these you can
get the best of both worlds: a globally aware authority that can control the flow of traffic on the macro
level while still having the individual proxies be able to react to changes on the micro level.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="load_balancers.html" class="btn btn-neutral float-right" title="Supported load balancers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="load_balancing.html" class="btn btn-neutral" title="Load Balancing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Envoy Project Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>