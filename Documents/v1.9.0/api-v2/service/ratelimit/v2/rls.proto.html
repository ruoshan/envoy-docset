

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rate Limit Service (RLS) &mdash; envoy tag-v1.9.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Common messages" href="../../../common_messages/common_messages.html" />
    <link rel="prev" title="gRPC Access Log Service (ALS)" href="../../accesslog/v2/als.proto.html" /> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                tag-v1.9.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../api.html">v2 API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config/config.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../service.html">Services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../accesslog/v2/als.proto.html">gRPC Access Log Service (ALS)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Rate Limit Service (RLS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#service-ratelimit-v2-ratelimitrequest">service.ratelimit.v2.RateLimitRequest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-ratelimit-v2-ratelimitresponse">service.ratelimit.v2.RateLimitResponse</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-ratelimit-v2-ratelimitresponse-ratelimit">service.ratelimit.v2.RateLimitResponse.RateLimit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enum-service-ratelimit-v2-ratelimitresponse-ratelimit-unit">Enum service.ratelimit.v2.RateLimitResponse.RateLimit.Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-ratelimit-v2-ratelimitresponse-descriptorstatus">service.ratelimit.v2.RateLimitResponse.DescriptorStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enum-service-ratelimit-v2-ratelimitresponse-code">Enum service.ratelimit.v2.RateLimitResponse.Code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../api.html">v2 API reference</a> &raquo;</li>
        
          <li><a href="../../service.html">Services</a> &raquo;</li>
        
      <li>Rate Limit Service (RLS)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v2/service/ratelimit/v2/rls.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rate-limit-service-rls">
<span id="envoy-api-file-envoy-service-ratelimit-v2-rls-proto"></span><h1>Rate Limit Service (RLS)<a class="headerlink" href="#rate-limit-service-rls" title="Permalink to this headline">¶</a></h1>
<div class="section" id="service-ratelimit-v2-ratelimitrequest">
<span id="envoy-api-msg-service-ratelimit-v2-ratelimitrequest"></span><h2>service.ratelimit.v2.RateLimitRequest<a class="headerlink" href="#service-ratelimit-v2-ratelimitrequest" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/ratelimit/v2/rls.proto#L25">[service.ratelimit.v2.RateLimitRequest proto]</a></p>
<p>Main message for a rate limit request. The rate limit service is designed to be fully generic
in the sense that it can operate on arbitrary hierarchical key/value pairs. The loaded
configuration will parse the request and find the most specific limit to apply. In addition,
a RateLimitRequest can contain multiple “descriptors” to limit on. When multiple descriptors
are provided, the server will limit on <em>ALL</em> of them and return an OVER_LIMIT response if any
of them are over limit. This enables more complex application level rate limiting scenarios
if desired.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;domain&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;descriptors&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;hits_addend&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitrequest-domain">
<dt>domain</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) All rate limit requests must specify a domain. This enables the configuration to be per
application without fear of overlap. E.g., “envoy”.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitrequest-descriptors">
<dt>descriptors</dt>
<dd>(<a class="reference internal" href="../../../api/v2/ratelimit/ratelimit.proto.html#envoy-api-msg-ratelimit-ratelimitdescriptor"><span class="std std-ref">ratelimit.RateLimitDescriptor</span></a>) All rate limit requests must specify at least one RateLimitDescriptor. Each descriptor is
processed by the service (see below). If any of the descriptors are over limit, the entire
request is considered to be over limit.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitrequest-hits-addend">
<dt>hits_addend</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) Rate limit requests can optionally specify the number of hits a request adds to the matched
limit. If the value is not set in the message, a request increases the matched limit by 1.</dd>
</dl>
</div>
<div class="section" id="service-ratelimit-v2-ratelimitresponse">
<span id="envoy-api-msg-service-ratelimit-v2-ratelimitresponse"></span><h2>service.ratelimit.v2.RateLimitResponse<a class="headerlink" href="#service-ratelimit-v2-ratelimitresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/ratelimit/v2/rls.proto#L41">[service.ratelimit.v2.RateLimitResponse proto]</a></p>
<p>A response from a ShouldRateLimit call.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;overall_code&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;statuses&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-overall-code">
<dt>overall_code</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-service-ratelimit-v2-ratelimitresponse-code"><span class="std std-ref">service.ratelimit.v2.RateLimitResponse.Code</span></a>) The overall response code which takes into account all of the descriptors that were passed
in the RateLimitRequest message.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-statuses">
<dt>statuses</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-service-ratelimit-v2-ratelimitresponse-descriptorstatus"><span class="std std-ref">service.ratelimit.v2.RateLimitResponse.DescriptorStatus</span></a>) A list of DescriptorStatus messages which matches the length of the descriptor list passed
in the RateLimitRequest. This can be used by the caller to determine which individual
descriptors failed and/or what the currently configured limits are for all of them.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-headers">
<dt>headers</dt>
<dd>(<a class="reference internal" href="../../../api/v2/core/base.proto.html#envoy-api-msg-core-headervalue"><span class="std std-ref">core.HeaderValue</span></a>) A list of headers to add to the response</dd>
</dl>
</div>
<div class="section" id="service-ratelimit-v2-ratelimitresponse-ratelimit">
<span id="envoy-api-msg-service-ratelimit-v2-ratelimitresponse-ratelimit"></span><h2>service.ratelimit.v2.RateLimitResponse.RateLimit<a class="headerlink" href="#service-ratelimit-v2-ratelimitresponse-ratelimit" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/ratelimit/v2/rls.proto#L52">[service.ratelimit.v2.RateLimitResponse.RateLimit proto]</a></p>
<p>Defines an actual rate limit in terms of requests per unit of time and the unit itself.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;requests_per_unit&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-ratelimit-requests-per-unit">
<dt>requests_per_unit</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) The number of requests per unit of time.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-ratelimit-unit">
<dt>unit</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-service-ratelimit-v2-ratelimitresponse-ratelimit-unit"><span class="std std-ref">service.ratelimit.v2.RateLimitResponse.RateLimit.Unit</span></a>) The unit of time.</dd>
</dl>
</div>
<div class="section" id="enum-service-ratelimit-v2-ratelimitresponse-ratelimit-unit">
<span id="envoy-api-enum-service-ratelimit-v2-ratelimitresponse-ratelimit-unit"></span><h2>Enum service.ratelimit.v2.RateLimitResponse.RateLimit.Unit<a class="headerlink" href="#enum-service-ratelimit-v2-ratelimitresponse-ratelimit-unit" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/ratelimit/v2/rls.proto#L53">[service.ratelimit.v2.RateLimitResponse.RateLimit.Unit proto]</a></p>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-ratelimit-unit-unknown">
<dt>UNKNOWN</dt>
<dd><em>(DEFAULT)</em> ⁣The time unit is not known.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-ratelimit-unit-second">
<dt>SECOND</dt>
<dd>⁣The time unit representing a second.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-ratelimit-unit-minute">
<dt>MINUTE</dt>
<dd>⁣The time unit representing a minute.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-ratelimit-unit-hour">
<dt>HOUR</dt>
<dd>⁣The time unit representing an hour.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-ratelimit-unit-day">
<dt>DAY</dt>
<dd>⁣The time unit representing a day.</dd>
</dl>
</div>
<div class="section" id="service-ratelimit-v2-ratelimitresponse-descriptorstatus">
<span id="envoy-api-msg-service-ratelimit-v2-ratelimitresponse-descriptorstatus"></span><h2>service.ratelimit.v2.RateLimitResponse.DescriptorStatus<a class="headerlink" href="#service-ratelimit-v2-ratelimitresponse-descriptorstatus" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/ratelimit/v2/rls.proto#L72">[service.ratelimit.v2.RateLimitResponse.DescriptorStatus proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;current_limit&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;limit_remaining&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-descriptorstatus-code">
<dt>code</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-service-ratelimit-v2-ratelimitresponse-code"><span class="std std-ref">service.ratelimit.v2.RateLimitResponse.Code</span></a>) The response code for an individual descriptor.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-descriptorstatus-current-limit">
<dt>current_limit</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-service-ratelimit-v2-ratelimitresponse-ratelimit"><span class="std std-ref">service.ratelimit.v2.RateLimitResponse.RateLimit</span></a>) The current limit as configured by the server. Useful for debugging, etc.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-service-ratelimit-v2-ratelimitresponse-descriptorstatus-limit-remaining">
<dt>limit_remaining</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) The limit remaining in the current time unit.</dd>
</dl>
</div>
<div class="section" id="enum-service-ratelimit-v2-ratelimitresponse-code">
<span id="envoy-api-enum-service-ratelimit-v2-ratelimitresponse-code"></span><h2>Enum service.ratelimit.v2.RateLimitResponse.Code<a class="headerlink" href="#enum-service-ratelimit-v2-ratelimitresponse-code" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/ratelimit/v2/rls.proto#L42">[service.ratelimit.v2.RateLimitResponse.Code proto]</a></p>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-code-unknown">
<dt>UNKNOWN</dt>
<dd><em>(DEFAULT)</em> ⁣The response code is not known.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-code-ok">
<dt>OK</dt>
<dd>⁣The response code to notify that the number of requests are under limit.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-service-ratelimit-v2-ratelimitresponse-code-over-limit">
<dt>OVER_LIMIT</dt>
<dd>⁣The response code to notify that the number of requests are over limit.</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../common_messages/common_messages.html" class="btn btn-neutral float-right" title="Common messages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../accesslog/v2/als.proto.html" class="btn btn-neutral" title="gRPC Access Log Service (ALS)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Envoy Project Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>