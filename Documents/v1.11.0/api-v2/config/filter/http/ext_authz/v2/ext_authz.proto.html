

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>External Authorization &mdash; envoy tag-v1.11.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="Fault Injection" href="../../fault/v2/fault.proto.html" />
    <link rel="prev" title="CSRF" href="../../csrf/v2/csrf.proto.html" /> 

  
  <script src="../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                tag-v1.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v2 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../config.html">Extensions</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../../filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../cluster/cluster.html">Cluster</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../../../api.html">v2 API reference</a> &raquo;</li>
        
          <li><a href="../../../../config.html">Extensions</a> &raquo;</li>
        
          <li><a href="../../../filter.html">Filters</a> &raquo;</li>
        
          <li><a href="../../http.html">HTTP filters</a> &raquo;</li>
        
      <li>External Authorization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../../_sources/api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="external-authorization">
<span id="envoy-api-file-envoy-config-filter-http-ext-authz-v2-ext-authz-proto"></span><h1>External Authorization<a class="headerlink" href="#external-authorization" title="Permalink to this headline">¶</a></h1>
<p>External Authorization <a class="reference internal" href="../../../../../../configuration/http_filters/ext_authz_filter.html#config-http-filters-ext-authz"><span class="std std-ref">configuration overview</span></a>.</p>
<div class="section" id="config-filter-http-ext-authz-v2-extauthz">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-extauthz"></span><h2>config.filter.http.ext_authz.v2.ExtAuthz<a class="headerlink" href="#config-filter-http-ext-authz-v2-extauthz" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L24">[config.filter.http.ext_authz.v2.ExtAuthz proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;grpc_service&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;http_service&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;failure_mode_allow&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;use_alpha&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;with_request_body&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;clear_route_cache&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;status_on_error&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-grpc-service">
<dt>grpc_service</dt>
<dd><p class="first">(<a class="reference internal" href="../../../../../api/v2/core/grpc_service.proto.html#envoy-api-msg-core-grpcservice"><span class="std std-ref">core.GrpcService</span></a>) gRPC service configuration (default timeout: 200ms).</p>
<p>External authorization service configuration.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>, <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-http-service"><span class="std std-ref">http_service</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-http-service">
<dt>http_service</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-filter-http-ext-authz-v2-httpservice"><span class="std std-ref">config.filter.http.ext_authz.v2.HttpService</span></a>) HTTP service configuration (default timeout: 200ms).</p>
<p>External authorization service configuration.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>, <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-http-service"><span class="std std-ref">http_service</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-failure-mode-allow">
<dt>failure_mode_allow</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>)  Changes filter’s behaviour on errors:</p>
<blockquote>
<div><p>1. When set to true, the filter will <em>accept</em> client request even if the communication with
the authorization service has failed, or if the authorization service has returned a HTTP 5xx
error.</p>
<p>2. When set to false, ext-authz will <em>reject</em> client requests and return a <em>Forbidden</em>
response if the communication with the authorization service has failed, or if the
authorization service has returned a HTTP 5xx error.</p>
</div></blockquote>
<p class="last">Note that errors can be <em>always</em> tracked in the <a class="reference internal" href="../../../../../../configuration/http_filters/ext_authz_filter.html#config-http-filters-ext-authz-stats"><span class="std std-ref">stats</span></a>.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-use-alpha">
<dt>use_alpha</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Sets the package version the gRPC service should use. This is particularly
useful when transitioning from alpha to release versions assuming that both definitions are
semantically compatible. Deprecation note: This field is deprecated and should only be used for
version upgrade. See release notes for more details.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-with-request-body">
<dt>with_request_body</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-filter-http-ext-authz-v2-buffersettings"><span class="std std-ref">config.filter.http.ext_authz.v2.BufferSettings</span></a>) Enables filter to buffer the client request body and send it within the authorization request.
A <code class="docutils literal notranslate"><span class="pre">x-envoy-auth-partial-body:</span> <span class="pre">false|true</span></code> metadata header will be added to the authorization
request message indicating if the body data is partial.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-clear-route-cache">
<dt>clear_route_cache</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clears route cache in order to allow the external authorization service to correctly affect
routing decisions. Filter clears all cached routes when:</p>
<ol class="arabic simple">
<li>The field is set to <em>true</em>.</li>
<li>The status returned from the authorization service is a HTTP 200 or gRPC 0.</li>
</ol>
<p class="last">3. At least one <em>authorization response header</em> is added to the client request, or is used for
altering another client request header.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthz-status-on-error">
<dt>status_on_error</dt>
<dd>(<a class="reference internal" href="../../../../../type/http_status.proto.html#envoy-api-msg-type-httpstatus"><span class="std std-ref">type.HttpStatus</span></a>) Sets the HTTP status that is returned to the client when there is a network error between the
filter and the authorization server. The default status is HTTP 403 Forbidden.</dd>
</dl>
</div>
<div class="section" id="config-filter-http-ext-authz-v2-buffersettings">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-buffersettings"></span><h2>config.filter.http.ext_authz.v2.BufferSettings<a class="headerlink" href="#config-filter-http-ext-authz-v2-buffersettings" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L77">[config.filter.http.ext_authz.v2.BufferSettings proto]</a></p>
<p>Configuration for buffering the request data.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;max_request_bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;allow_partial_message&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-buffersettings-max-request-bytes">
<dt>max_request_bytes</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) Sets the maximum size of a message body that the filter will hold in memory. Envoy will return
<em>HTTP 413</em> and will <em>not</em> initiate the authorization process when buffer reaches the number
set in this field. Note that this setting will have precedence over <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-failure-mode-allow"><span class="std std-ref">failure_mode_allow</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-buffersettings-allow-partial-message">
<dt>allow_partial_message</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When this field is true, Envoy will buffer the message until <em>max_request_bytes</em> is reached.
The authorization request will be dispatched and no 413 HTTP error will be returned by the
filter.</dd>
</dl>
</div>
<div class="section" id="config-filter-http-ext-authz-v2-httpservice">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-httpservice"></span><h2>config.filter.http.ext_authz.v2.HttpService<a class="headerlink" href="#config-filter-http-ext-authz-v2-httpservice" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L114">[config.filter.http.ext_authz.v2.HttpService proto]</a></p>
<p>HttpService is used for raw HTTP communication between the filter and the authorization service.
When configured, the filter will parse the client request and use these attributes to call the
authorization server. Depending on the response, the filter may reject or accept the client
request. Note that in any of these events, metadata can be added, removed or overridden by the
filter:</p>
<p><em>On authorization request</em>, a list of allowed request headers may be supplied. See
<a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-authorizationrequest-allowed-headers"><span class="std std-ref">allowed_headers</span></a>
for details. Additional headers metadata may be added to the authorization request. See
<a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-authorizationrequest-headers-to-add"><span class="std std-ref">headers_to_add</span></a> for
details.</p>
<p>On authorization response status HTTP 200 OK, the filter will allow traffic to the upstream and
additional headers metadata may be added to the original client request. See
<a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-authorizationresponse-allowed-upstream-headers"><span class="std std-ref">allowed_upstream_headers</span></a>
for details.</p>
<p>On other authorization response statuses, the filter will not allow traffic. Additional headers
metadata as well as body may be added to the client’s response. See <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-authorizationresponse-allowed-client-headers"><span class="std std-ref">allowed_client_headers</span></a>
for details.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;server_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;path_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;authorization_request&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;authorization_response&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-httpservice-server-uri">
<dt>server_uri</dt>
<dd>(<a class="reference internal" href="../../../../../api/v2/core/http_uri.proto.html#envoy-api-msg-core-httpuri"><span class="std std-ref">core.HttpUri</span></a>) Sets the HTTP server URI which the authorization requests must be sent to.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-httpservice-path-prefix">
<dt>path_prefix</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Sets a prefix to the value of authorization request header <em>Path</em>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-httpservice-authorization-request">
<dt>authorization_request</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-filter-http-ext-authz-v2-authorizationrequest"><span class="std std-ref">config.filter.http.ext_authz.v2.AuthorizationRequest</span></a>) Settings used for controlling authorization request metadata.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-httpservice-authorization-response">
<dt>authorization_response</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-config-filter-http-ext-authz-v2-authorizationresponse"><span class="std std-ref">config.filter.http.ext_authz.v2.AuthorizationResponse</span></a>) Settings used for controlling authorization response metadata.</dd>
</dl>
</div>
<div class="section" id="config-filter-http-ext-authz-v2-authorizationrequest">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-authorizationrequest"></span><h2>config.filter.http.ext_authz.v2.AuthorizationRequest<a class="headerlink" href="#config-filter-http-ext-authz-v2-authorizationrequest" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L133">[config.filter.http.ext_authz.v2.AuthorizationRequest proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;allowed_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;headers_to_add&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-authorizationrequest-allowed-headers">
<dt>allowed_headers</dt>
<dd><p class="first">(<a class="reference internal" href="../../../../../type/matcher/string.proto.html#envoy-api-msg-type-matcher-liststringmatcher"><span class="std std-ref">type.matcher.ListStringMatcher</span></a>) Authorization request will include the client request headers that have a correspondent match
in the <a class="reference internal" href="../../../../../type/matcher/string.proto.html#envoy-api-msg-type-matcher-liststringmatcher"><span class="std std-ref">list</span></a>. Note that in addition to the
user’s supplied matchers:</p>
<ol class="arabic simple">
<li><em>Host</em>, <em>Method</em>, <em>Path</em> and <em>Content-Length</em> are automatically included to the list.</li>
</ol>
<p class="last">2. <em>Content-Length</em> will be set to 0 and the request to the authorization service will not have
a message body.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-authorizationrequest-headers-to-add">
<dt>headers_to_add</dt>
<dd>(<a class="reference internal" href="../../../../../api/v2/core/base.proto.html#envoy-api-msg-core-headervalue"><span class="std std-ref">core.HeaderValue</span></a>) Sets a list of headers that will be included to the request to authorization service. Note that
client request of the same key will be overridden.</dd>
</dl>
</div>
<div class="section" id="config-filter-http-ext-authz-v2-authorizationresponse">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-authorizationresponse"></span><h2>config.filter.http.ext_authz.v2.AuthorizationResponse<a class="headerlink" href="#config-filter-http-ext-authz-v2-authorizationresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L150">[config.filter.http.ext_authz.v2.AuthorizationResponse proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;allowed_upstream_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;allowed_client_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-authorizationresponse-allowed-upstream-headers">
<dt>allowed_upstream_headers</dt>
<dd>(<a class="reference internal" href="../../../../../type/matcher/string.proto.html#envoy-api-msg-type-matcher-liststringmatcher"><span class="std std-ref">type.matcher.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/string.proto.html#envoy-api-msg-type-matcher-liststringmatcher"><span class="std std-ref">list</span></a> is set, authorization
response headers that have a correspondent match will be added to the original client request.
Note that coexistent headers will be overridden.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-authorizationresponse-allowed-client-headers">
<dt>allowed_client_headers</dt>
<dd>(<a class="reference internal" href="../../../../../type/matcher/string.proto.html#envoy-api-msg-type-matcher-liststringmatcher"><span class="std std-ref">type.matcher.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/string.proto.html#envoy-api-msg-type-matcher-liststringmatcher"><span class="std std-ref">list</span></a>. is set, authorization
response headers that have a correspondent match will be added to the client’s response. Note
that when this list is <em>not</em> set, all the authorization response headers, except <em>Authority
(Host)</em> will be in the response to the client. When a header is included in this list, <em>Path</em>,
<em>Status</em>, <em>Content-Length</em>, <em>WWWAuthenticate</em> and <em>Location</em> are automatically added.</dd>
</dl>
</div>
<div class="section" id="config-filter-http-ext-authz-v2-extauthzperroute">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-extauthzperroute"></span><h2>config.filter.http.ext_authz.v2.ExtAuthzPerRoute<a class="headerlink" href="#config-filter-http-ext-authz-v2-extauthzperroute" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L165">[config.filter.http.ext_authz.v2.ExtAuthzPerRoute proto]</a></p>
<p>Extra settings on a per virtualhost/route/weighted-cluster level.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;disabled&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;check_settings&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthzperroute-disabled">
<dt>disabled</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Disable the ext auth filter for this particular vhost or route.
If disabled is specified in multiple per-filter-configs, the most specific one will be used.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthzperroute-disabled"><span class="std std-ref">disabled</span></a>, <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthzperroute-check-settings"><span class="std std-ref">check_settings</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-extauthzperroute-check-settings">
<dt>check_settings</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-config-filter-http-ext-authz-v2-checksettings"><span class="std std-ref">config.filter.http.ext_authz.v2.CheckSettings</span></a>) Check request settings for this route.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthzperroute-disabled"><span class="std std-ref">disabled</span></a>, <a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthzperroute-check-settings"><span class="std std-ref">check_settings</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="config-filter-http-ext-authz-v2-checksettings">
<span id="envoy-api-msg-config-filter-http-ext-authz-v2-checksettings"></span><h2>config.filter.http.ext_authz.v2.CheckSettings<a class="headerlink" href="#config-filter-http-ext-authz-v2-checksettings" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.11.0/api/envoy/config/filter/http/ext_authz/v2/ext_authz.proto#L183">[config.filter.http.ext_authz.v2.CheckSettings proto]</a></p>
<p>Extra settings for the check request. You can use this to provide extra context for the
external authorization server on specific virtual hosts routes. For example, adding a context
extension on the virtual host level can give the ext-authz server information on what virtual
host is used without needing to parse the host header. If CheckSettings is specified in multiple
per-filter-configs, they will be merged in order, and the result will be used.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;context_extensions&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-config-filter-http-ext-authz-v2-checksettings-context-extensions">
<dt>context_extensions</dt>
<dd><p class="first">(map&lt;<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>&gt;) Context extensions to set on the CheckRequest’s
<a class="reference internal" href="../../../../../service/auth/v2/attribute_context.proto.html#envoy-api-field-service-auth-v2-attributecontext-context-extensions"><span class="std std-ref">AttributeContext.context_extensions</span></a></p>
<p>Merge semantics for this field are such that keys from more specific configs override.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These settings are only applied to a filter configured with a
<a class="reference internal" href="#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>.</p>
</div>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../fault/v2/fault.proto.html" class="btn btn-neutral float-right" title="Fault Injection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../csrf/v2/csrf.proto.html" class="btn btn-neutral" title="CSRF" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, Envoy Project Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>