<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.7.0 (Jun 21, 2018) &mdash; envoy tag-v1.21.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/envoy.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.6.0 (March 20, 2018)" href="v1.6.0.html" />
    <link rel="prev" title="1.8.0 (Oct 4, 2018)" href="v1.8.0.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tag-v1.21.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="version_history.html">Version history</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="current.html">1.21.1 (Pending)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.21.0.html">1.21.0 (January 12, 2022)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.20.1.html">1.20.1 (November 30, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.20.0.html">1.20.0 (October 5, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.19.1.html">1.19.1 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.19.0.html">1.19.0 (July 13, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.4.html">1.18.4 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.3.html">1.18.3 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.2.html">1.18.2 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.1.html">1.18.1 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.0.html">1.18.0 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.4.html">1.17.4 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.3.html">1.17.3 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.2.html">1.17.2 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.1.html">1.17.1 (February 25, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.0.html">1.17.0 (January 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.5.html">1.16.5 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.4.html">1.16.4 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.3.html">1.16.3 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.2.html">1.16.2 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.1.html">1.16.1 (November 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.0.html">1.16.0 (October 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.5.html">1.15.5 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.4.html">1.15.4 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.3.html">1.15.3 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.2.html">1.15.2 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.1.html">1.15.1 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.0.html">1.15.0 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.7.html">1.14.7 (April 15, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.6.html">1.14.6 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.5.html">1.14.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.4.html">1.14.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.3.html">1.14.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.2.html">1.14.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.1.html">1.14.1 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.0.html">1.14.0 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.8.html">1.13.8 (January 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.7.html">1.13.7 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.6.html">1.13.6 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.5.html">1.13.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.4.html">1.13.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.3.html">1.13.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.2.html">1.13.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.1.html">1.13.1 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.0.html">1.13.0 (January 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.7.html">1.12.7 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.6.html">1.12.6 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.5.html">1.12.5 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.4.html">1.12.4 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.3.html">1.12.3 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.2.html">1.12.2 (December 10, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.1.html">1.12.1 (November 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.0.html">1.12.0 (October 31, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.2.html">1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.1.html">1.11.1 (August 13, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.0.html">1.11.0 (July 11, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.10.0.html">1.10.0 (Apr 5, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.1.html">1.9.1 (Apr 2, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.0.html">1.9.0 (Dec 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.8.0.html">1.8.0 (Oct 4, 2018)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.7.0 (Jun 21, 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#changes">Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.6.0.html">1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5.0.html">1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4.0.html">1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3.0.html">1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.0.html">1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.0.html">1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.0.html">1.0.0 (September 12, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="version_history.html">Version history</a> &raquo;</li>
      <li>1.7.0 (Jun 21, 2018)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/version_history/v1.7.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="jun-21-2018">
<h1>1.7.0 (Jun 21, 2018)<a class="headerlink" href="#jun-21-2018" title="Permalink to this headline">¶</a></h1>
<div class="section" id="changes">
<h2>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added ability to log response trailers.</p></li>
<li><p>access log: added ability to format START_TIME.</p></li>
<li><p>access log: added DYNAMIC_METADATA <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/access_log.html#config-access-log-format" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">access log formatter</span></a>.</p></li>
<li><p>access log: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/accesslog/v2/accesslog.proto.html#envoy-api-msg-config-filter-accesslog-v2-headerfilter" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">HeaderFilter</span></a>
to filter logs based on request headers.</p></li>
<li><p>access log: added <code class="docutils literal notranslate"><span class="pre">%([1-9])?f</span></code> as one of START_TIME specifiers to render subseconds.</p></li>
<li><p>access log: gRPC Access Log Service (ALS) support added for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/accesslog/v2/als.proto.html#envoy-api-msg-config-accesslog-v2-httpgrpcaccesslogconfig" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">HTTP access logs</span></a>.</p></li>
<li><p>access log: improved WebSocket logging.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--config_dump" title="GET /config_dump"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/config_dump</span></code></a> for dumping the current configuration and associated xDS
version information (if applicable).</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--clusters?format=json" title="GET /clusters?format=json"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/clusters?format=json</span></code></a> for outputing a JSON-serialized proto detailing
the current status of all clusters.</p></li>
<li><p>admin: added <a class="reference internal" href="../operations/admin.html#get--stats-prometheus" title="GET /stats/prometheus"><code class="xref http http-get docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/stats/prometheus</span></code></a> as an alternative endpoint for getting stats in prometheus format.</p></li>
<li><p>admin: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/operations/admin.html#operations-admin-interface-runtime-modify" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">/runtime_modify endpoint</span></a> to add or change runtime values.</p></li>
<li><p>admin: mutations must be sent as POSTs, rather than GETs. Mutations include:
<a class="reference internal" href="../operations/admin.html#post--cpuprofiler" title="POST /cpuprofiler"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/cpuprofiler</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--healthcheck-fail" title="POST /healthcheck/fail"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/healthcheck/fail</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--healthcheck-ok" title="POST /healthcheck/ok"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/healthcheck/ok</span></code></a>,
<a class="reference internal" href="../operations/admin.html#post--logging" title="POST /logging"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/logging</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--quitquitquit" title="POST /quitquitquit"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/quitquitquit</span></code></a>, <a class="reference internal" href="../operations/admin.html#post--reset_counters" title="POST /reset_counters"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/reset_counters</span></code></a>,
<a class="reference internal" href="../operations/admin.html#post--runtime_modify?key1=value1&amp;key2=value2&amp;keyN=valueN" title="POST /runtime_modify?key1=value1&amp;key2=value2&amp;keyN=valueN"><code class="xref http http-post docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/runtime_modify?key1=value1&amp;key2=value2&amp;keyN=valueN</span></code></a>.</p></li>
<li><p>admin: removed <code class="docutils literal notranslate"><span class="pre">/routes</span></code> endpoint; route configs can now be found at the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/operations/admin.html#operations-admin-interface-config-dump" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">/config_dump endpoint</span></a>.</p></li>
<li><p>buffer filter: the buffer filter can be optionally
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/http/buffer/v2/buffer.proto.html#envoy-api-field-config-filter-http-buffer-v2-bufferperroute-disabled" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">disabled</span></a> or
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/http/buffer/v2/buffer.proto.html#envoy-api-field-config-filter-http-buffer-v2-bufferperroute-buffer" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">overridden</span></a> with
route-local configuration.</p></li>
<li><p>cli: added –config-yaml flag to the Envoy binary. When set its value is interpreted as a yaml
representation of the bootstrap config and overrides –config-path.</p></li>
<li><p>cluster: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/cds.proto.html#envoy-api-field-cluster-close-connections-on-host-health-failure" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">option</span></a>
to close tcp_proxy upstream connections when health checks fail.</p></li>
<li><p>cluster: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/cds.proto.html#envoy-api-field-cluster-drain-connections-on-host-removal" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">option</span></a> to drain
connections from hosts after they are removed from service discovery, regardless of health status.</p></li>
<li><p>cluster: fixed bug preventing the deletion of all endpoints in a priority</p></li>
<li><p>debug: added symbolized stack traces (where supported)</p></li>
<li><p>ext-authz filter: added support to raw HTTP authorization.</p></li>
<li><p>ext-authz filter: added support to gRPC responses to carry HTTP attributes.</p></li>
<li><p>grpc: support added for the full set of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/core/grpc_service.proto.html#envoy-api-msg-core-grpcservice-googlegrpc-callcredentials" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">Google gRPC call credentials</span></a>.</p></li>
<li><p>gzip filter: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_filters/gzip_filter.html#gzip-statistics" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">stats</span></a> to the filter.</p></li>
<li><p>gzip filter: sending <em>accept-encoding</em> header as <em>identity</em> no longer compresses the payload.</p></li>
<li><p>health check: added ability to set <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-httphealthcheck-request-headers-to-add" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">additional HTTP headers</span></a> for HTTP health check.</p></li>
<li><p>health check: added support for EDS delivered <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/endpoint/endpoint.proto.html#envoy-api-field-endpoint-lbendpoint-health-status" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">endpoint health status</span></a>.</p></li>
<li><p>health check: added interval overrides for health state transitions from <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-unhealthy-edge-interval" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">healthy to unhealthy</span></a>, <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-healthy-edge-interval" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">unhealthy to healthy</span></a> and for subsequent checks on
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-unhealthy-interval" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">unhealthy hosts</span></a>.</p></li>
<li><p>health check: added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/core/health_check.proto.html#envoy-api-field-core-healthcheck-custom-health-check" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">custom health check</span></a>.</p></li>
<li><p>health check: health check connections can now be configured to use http/2.</p></li>
<li><p>health check http filter: added
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/http/health_check/v2/health_check.proto.html#envoy-api-field-config-filter-http-health-check-v2-healthcheck-headers" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">generic header matching</span></a>
to trigger health check response. Deprecated the endpoint option.</p></li>
<li><p>http: filters can now optionally support
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-virtualhost-per-filter-config" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">virtual host</span></a>,
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-route-per-filter-config" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">route</span></a>, and
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-weightedcluster-clusterweight-per-filter-config" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">weighted cluster</span></a>
local configuration.</p></li>
<li><p>http: added the ability to pass DNS type Subject Alternative Names of the client certificate in the
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-client-cert" title="(in envoy vtag-v1.7.1)"><span>x-forwarded-client-cert</span></a> header.</p></li>
<li><p>http: local responses to gRPC requests are now sent as trailers-only gRPC responses instead of plain HTTP responses.
Notably the HTTP response code is always “200” in this case, and the gRPC error code is carried in “grpc-status”
header, optionally accompanied with a text message in “grpc-message” header.</p></li>
<li><p>http: added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-via" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">via header</span></a>
append.</p></li>
<li><p>http: added a <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-skip-xff-append" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">configuration option</span></a>
to elide <em>x-forwarded-for</em> header modifications.</p></li>
<li><p>http: fixed a bug in inline headers where addCopy and addViaMove didn’t add header values when
encountering inline headers with multiple instances.</p></li>
<li><p>listeners: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/lds.proto.html#envoy-api-field-listener-tcp-fast-open-queue-length" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">tcp_fast_open_queue_length</span></a> option.</p></li>
<li><p>listeners: added the ability to match <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/listener/listener.proto.html#envoy-api-msg-listener-filterchain" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">FilterChain</span></a> using
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/listener/listener.proto.html#envoy-api-field-listener-filterchainmatch-application-protocols" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">application_protocols</span></a>
(e.g. ALPN for TLS protocol).</p></li>
<li><p>listeners: <code class="docutils literal notranslate"><span class="pre">sni_domains</span></code> has been deprecated/renamed to <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/listener/listener.proto.html#envoy-api-field-listener-filterchainmatch-server-names" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">server_names</span></a>.</p></li>
<li><p>listeners: removed restriction on all filter chains having identical filters.</p></li>
<li><p>load balancer: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-round-robin" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">weighted round robin</span></a> support. The round robin
scheduler now respects endpoint weights and also has improved fidelity across
picks.</p></li>
<li><p>load balancer: <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/intro/arch_overview/load_balancing.html#arch-overview-load-balancer-subsets" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">locality weighted load balancing</span></a> is now supported.</p></li>
<li><p>load balancer: ability to configure zone aware load balancer settings <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/cds.proto.html#envoy-api-field-cluster-commonlbconfig-zone-aware-lb-config" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">through the API</span></a>.</p></li>
<li><p>load balancer: the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-least-request" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">weighted least request</span></a> load balancing algorithm has been improved
to have better balance when operating in weighted mode.</p></li>
<li><p>logger: added the ability to optionally set the log format via the <a class="reference internal" href="../operations/cli.html#cmdoption-log-format"><code class="xref std std-option docutils literal notranslate"><span class="pre">--log-format</span></code></a> option.</p></li>
<li><p>logger: all <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/operations/admin.html#operations-admin-interface-logging" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">logging levels</span></a> can be configured
at run-time: trace debug info warning error critical.</p></li>
<li><p>rbac http filter: a <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_filters/rbac_filter.html#config-http-filters-rbac" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">role-based access control http filter</span></a> has been added.</p></li>
<li><p>router: the behavior of per-try timeouts have changed in the case where a portion of the response has
already been proxied downstream when the timeout occurs. Previously, the response would be reset
leading to either an HTTP/2 reset or an HTTP/1 closed connection and a partial response. Now, the
timeout will be ignored and the response will continue to proxy up to the global request timeout.</p></li>
<li><p>router: changed the behavior of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-routeaction-hashpolicy-connectionproperties-source-ip" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">source IP routing</span></a>
to ignore the source port.</p></li>
<li><p>router: added an <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-headermatcher-prefix-match" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">prefix_match</span></a> match type
to explicitly match based on the prefix of a header value.</p></li>
<li><p>router: added an <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-headermatcher-suffix-match" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">suffix_match</span></a> match type
to explicitly match based on the suffix of a header value.</p></li>
<li><p>router: added an <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-headermatcher-present-match" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">present_match</span></a> match type
to explicitly match based on a header’s presence.</p></li>
<li><p>router: added an <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-headermatcher-invert-match" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">invert_match</span></a> config option
which supports inverting all other match types to match based on headers which are not a desired value.</p></li>
<li><p>router: allow <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-msg-route-routeaction-hashpolicy-cookie" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">cookie routing</span></a> to
generate session cookies.</p></li>
<li><p>router: added START_TIME as one of supported variables in <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">header
formatters</span></a>.</p></li>
<li><p>router: added a <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/route/route.proto.html#envoy-api-field-route-routeaction-max-grpc-timeout" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">max_grpc_timeout</span></a>
config option to specify the maximum allowable value for timeouts decoded from gRPC header field
<code class="docutils literal notranslate"><span class="pre">grpc-timeout</span></code>.</p></li>
<li><p>router: added a <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/filter/http/router/v2/router.proto.html#envoy-api-field-config-filter-http-router-v2-router-suppress-envoy-headers" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">configuration option</span></a> to disable <em>x-envoy-</em>
header generation.</p></li>
<li><p>router: added ‘unavailable’ to the retriable gRPC status codes that can be specified
through <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-grpc-on" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">x-envoy-retry-grpc-on</span></a>.</p></li>
<li><p>sockets: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/operations/traffic_capture.html#operations-traffic-capture" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">tap transport socket extension</span></a> to support
recording plain text traffic and PCAP generation.</p></li>
<li><p>sockets: added <code class="docutils literal notranslate"><span class="pre">IP_FREEBIND</span></code> socket option support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/lds.proto.html#envoy-api-field-listener-freebind" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">listeners</span></a> and upstream connections via
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/bootstrap/v2/bootstrap.proto.html#envoy-api-field-config-bootstrap-v2-clustermanager-upstream-bind-config" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">cluster manager wide</span></a> and
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/cds.proto.html#envoy-api-field-cluster-upstream-bind-config" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">cluster specific</span></a> options.</p></li>
<li><p>sockets: added <code class="docutils literal notranslate"><span class="pre">IP_TRANSPARENT</span></code> socket option support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/lds.proto.html#envoy-api-field-listener-transparent" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">listeners</span></a>.</p></li>
<li><p>sockets: added <code class="docutils literal notranslate"><span class="pre">SO_KEEPALIVE</span></code> socket option for upstream connections
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/cds.proto.html#envoy-api-field-cluster-upstream-connection-options" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">per cluster</span></a>.</p></li>
<li><p>stats: added support for histograms.</p></li>
<li><p>stats: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/config/metrics/v2/stats.proto.html#envoy-api-field-config-metrics-v2-statsdsink-prefix" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">option to configure the statsd prefix</span></a>.</p></li>
<li><p>stats: updated stats sink interface to flush through a single call.</p></li>
<li><p>tls: added support for
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-spki" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">verify_certificate_spki</span></a>.</p></li>
<li><p>tls: added support for multiple
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-hash" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">verify_certificate_hash</span></a>
values.</p></li>
<li><p>tls: added support for using
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-spki" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">verify_certificate_spki</span></a>
and <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-verify-certificate-hash" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">verify_certificate_hash</span></a>
without <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-trusted-ca" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">trusted_ca</span></a>.</p></li>
<li><p>tls: added support for allowing expired certificates with
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-certificatevalidationcontext-allow-expired-certificate" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">allow_expired_certificate</span></a>.</p></li>
<li><p>tls: added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/api-v2/api/v2/auth/cert.proto.html#envoy-api-field-auth-upstreamtlscontext-allow-renegotiation" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">renegotiation</span></a>
when acting as a client.</p></li>
<li><p>tls: removed support for legacy SHA-2 CBC cipher suites.</p></li>
<li><p>tracing: the sampling decision is now delegated to the tracers, allowing the tracer to decide when and if
to use it. For example, if the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_conn_man/headers.html#config-http-conn-man-headers-x-b3-sampled" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">x-b3-sampled</span></a> header
is supplied with the client request, its value will override any sampling decision made by the Envoy proxy.</p></li>
<li><p>websocket: support configuring idle_timeout and max_connect_attempts.</p></li>
<li><p>upstream: added support for host override for a request in <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types-original-destination-request-header" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">Original destination host request header</span></a>.</p></li>
<li><p>header to metadata: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.7.1/configuration/http_filters/header_to_metadata_filter.html#config-http-filters-header-to-metadata" title="(in envoy vtag-v1.7.1)"><span class="xref std std-ref">HTTP Header to Metadata filter</span></a>.</p></li>
</ul>
</div>
<div class="section" id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Admin mutations should be sent as POSTs rather than GETs. HTTP GETs will result in an error
status code and will not have their intended effect. Prior to 1.7, GETs can be used for
admin mutations, but a warning is logged.</p></li>
<li><p>Rate limit service configuration via the <code class="docutils literal notranslate"><span class="pre">cluster_name</span></code> field is deprecated. Use <code class="docutils literal notranslate"><span class="pre">grpc_service</span></code>
instead.</p></li>
<li><p>gRPC service configuration via the <code class="docutils literal notranslate"><span class="pre">cluster_names</span></code> field in <code class="docutils literal notranslate"><span class="pre">ApiConfigSource</span></code> is deprecated. Use
<code class="docutils literal notranslate"><span class="pre">grpc_services</span></code> instead. Prior to 1.7, a warning is logged.</p></li>
<li><p>Redis health checker configuration via the <code class="docutils literal notranslate"><span class="pre">redis_health_check</span></code> field in <code class="docutils literal notranslate"><span class="pre">HealthCheck</span></code> is
deprecated. Use <code class="docutils literal notranslate"><span class="pre">custom_health_check</span></code> with name <code class="docutils literal notranslate"><span class="pre">envoy.health_checkers.redis</span></code> instead. Prior
to 1.7, <code class="docutils literal notranslate"><span class="pre">redis_health_check</span></code> can be used, but warning is logged.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAN</span></code> is replaced by <code class="docutils literal notranslate"><span class="pre">URI</span></code> in the <code class="docutils literal notranslate"><span class="pre">x-forwarded-client-cert</span></code> header.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> field in the http health check filter is deprecated in favor of the <code class="docutils literal notranslate"><span class="pre">headers</span></code>
field where one can specify HeaderMatch objects to match on.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sni_domains</span></code> field in the filter chain match was deprecated/renamed to <code class="docutils literal notranslate"><span class="pre">server_names</span></code>.</p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.8.0.html" class="btn btn-neutral float-left" title="1.8.0 (Oct 4, 2018)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="v1.6.0.html" class="btn btn-neutral float-right" title="1.6.0 (March 20, 2018)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>