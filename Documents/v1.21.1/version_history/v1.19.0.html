<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.19.0 (July 13, 2021) &mdash; envoy tag-v1.21.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/envoy.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.18.4 (Aug 24, 2021)" href="v1.18.4.html" />
    <link rel="prev" title="1.19.1 (Aug 24, 2021)" href="v1.19.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tag-v1.21.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="version_history.html">Version history</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="current.html">1.21.1 (Pending)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.21.0.html">1.21.0 (January 12, 2022)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.20.1.html">1.20.1 (November 30, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.20.0.html">1.20.0 (October 5, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.19.1.html">1.19.1 (Aug 24, 2021)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.19.0 (July 13, 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#incompatible-behavior-changes">Incompatible Behavior Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minor-behavior-changes">Minor Behavior Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removed-config-or-runtime">Removed Config or Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-features">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.4.html">1.18.4 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.3.html">1.18.3 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.2.html">1.18.2 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.1.html">1.18.1 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.18.0.html">1.18.0 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.4.html">1.17.4 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.3.html">1.17.3 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.2.html">1.17.2 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.1.html">1.17.1 (February 25, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.17.0.html">1.17.0 (January 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.5.html">1.16.5 (Aug 24, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.4.html">1.16.4 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.3.html">1.16.3 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.2.html">1.16.2 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.1.html">1.16.1 (November 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.0.html">1.16.0 (October 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.5.html">1.15.5 (May 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.4.html">1.15.4 (April 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.3.html">1.15.3 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.2.html">1.15.2 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.1.html">1.15.1 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.0.html">1.15.0 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.7.html">1.14.7 (April 15, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.6.html">1.14.6 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.5.html">1.14.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.4.html">1.14.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.3.html">1.14.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.2.html">1.14.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.1.html">1.14.1 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.0.html">1.14.0 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.8.html">1.13.8 (January 15, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.7.html">1.13.7 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.6.html">1.13.6 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.5.html">1.13.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.4.html">1.13.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.3.html">1.13.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.2.html">1.13.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.1.html">1.13.1 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.0.html">1.13.0 (January 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.7.html">1.12.7 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.6.html">1.12.6 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.5.html">1.12.5 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.4.html">1.12.4 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.3.html">1.12.3 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.2.html">1.12.2 (December 10, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.1.html">1.12.1 (November 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.0.html">1.12.0 (October 31, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.2.html">1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.1.html">1.11.1 (August 13, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.0.html">1.11.0 (July 11, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.10.0.html">1.10.0 (Apr 5, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.1.html">1.9.1 (Apr 2, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.0.html">1.9.0 (Dec 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.8.0.html">1.8.0 (Oct 4, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.7.0.html">1.7.0 (Jun 21, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.6.0.html">1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5.0.html">1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4.0.html">1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3.0.html">1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.0.html">1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.0.html">1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.0.html">1.0.0 (September 12, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="version_history.html">Version history</a> &raquo;</li>
      <li>1.19.0 (July 13, 2021)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/version_history/v1.19.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="july-13-2021">
<h1>1.19.0 (July 13, 2021)<a class="headerlink" href="#july-13-2021" title="Permalink to this headline">¶</a></h1>
<div class="section" id="incompatible-behavior-changes">
<h2>Incompatible Behavior Changes<a class="headerlink" href="#incompatible-behavior-changes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p>grpc_bridge_filter: the filter no longer collects grpc stats in favor of the existing grpc stats filter.
The behavior can be reverted by changing runtime key <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.grpc_bridge_stats_disabled</span></code>.</p></li>
<li><p>tracing: update Apache SkyWalking tracer version to be compatible with 8.4.0 data collect protocol. This change will introduce incompatibility with SkyWalking 8.3.0.</p></li>
</ul>
</div>
<div class="section" id="minor-behavior-changes">
<h2>Minor Behavior Changes<a class="headerlink" href="#minor-behavior-changes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul class="simple">
<li><p>access_log: added new access_log command operator <code class="docutils literal notranslate"><span class="pre">%REQUEST_TX_DURATION%</span></code>.</p></li>
<li><p>access_log: removed extra quotes on metadata string values. This behavior can be temporarily reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.unquote_log_string_values</span></code> to false.</p></li>
<li><p>admission control: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/admission_control/v3alpha/admission_control.proto.html#envoy-v3-api-field-extensions-filters-http-admission-control-v3alpha-admissioncontrol-max-rejection-probability" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">max_rejection_probability</span></a> which defaults to 80%, which means that the upper limit of the default rejection probability of the filter is changed from 100% to 80%.</p></li>
<li><p>aws_request_signing: requests are now buffered by default to compute signatures which include the
payload hash, making the filter compatible with most AWS services. Previously, requests were
never buffered, which only produced correct signatures for requests without a body, or for
requests to S3, ES or Glacier, which used the literal string <code class="docutils literal notranslate"><span class="pre">UNSIGNED-PAYLOAD</span></code>. Buffering can
be now be disabled in favor of using unsigned payloads with compatible services via the new
<code class="docutils literal notranslate"><span class="pre">use_unsigned_payload</span></code> filter option (default false).</p></li>
<li><p>cache filter: serve HEAD requests from cache.</p></li>
<li><p>cluster: added default value of 5 seconds for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-connect-timeout" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">connect_timeout</span></a>.</p></li>
<li><p>dns: changed apple resolver implementation to not reuse the UDS to the local DNS daemon.</p></li>
<li><p>dns cache: the new <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-dns-query-timeout" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_query_timeout</span></a> option has a default of 5s. See below for more information.</p></li>
<li><p>http: disable the integration between <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/matching/v3/extension_matcher.proto.html#envoy-v3-api-msg-extensions-common-matching-v3-extensionwithmatcher" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">ExtensionWithMatcher</span></a>
and HTTP filters by default to reflect its experimental status. This feature can be enabled by setting
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.experimental_matching_api</span></code> to true.</p></li>
<li><p>http: replaced setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.strict_1xx_and_204_response_headers</span></code> with settings
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.require_strict_1xx_and_204_response_headers</span></code>
(require upstream 1xx or 204 responses to not have Transfer-Encoding or non-zero Content-Length headers) and
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.send_strict_1xx_and_204_response_headers</span></code>
(do not send 1xx or 204 responses with these headers). Both are true by default.</p></li>
<li><p>http: stop sending the transfer-encoding header for 304. This behavior can be temporarily reverted by setting
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.no_chunked_encoding_header_for_304</span></code> to false.</p></li>
<li><p>http: the behavior of the <code class="docutils literal notranslate"><span class="pre">present_match</span></code> in route header matcher changed. The value of <code class="docutils literal notranslate"><span class="pre">present_match</span></code> was ignored in the past. The new behavior is <code class="docutils literal notranslate"><span class="pre">present_match</span></code> is performed when the value is true. An absent match performed when the value is false. Please reference <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-headermatcher-present-match"><span class="std std-ref">present_match</span></a>.</p></li>
<li><p>listener: respect the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-connection-balance-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">connection balance config</span></a>
defined within the listener where the sockets are redirected to. Clear that field to restore the previous behavior.</p></li>
<li><p>listener: when balancing across active listeners and wildcard matching is used, the behavior has been changed to return the listener that matches the IP family type associated with the listener’s socket address. Any unexpected behavioral changes can be reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.listener_wildcard_match_ip_family</span></code> to false.</p></li>
<li><p>tcp: switched to the new connection pool by default. Any unexpected behavioral changes can be reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.new_tcp_connection_pool</span></code> to false.</p></li>
<li><p>udp: limit each UDP listener to read maximum 6000 packets per event loop. This behavior can be temporarily reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.udp_per_event_loop_read_limit</span></code> to false.</p></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p>aws_lambda: if <code class="docutils literal notranslate"><span class="pre">payload_passthrough</span></code> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the downstream response content-type header will now be set from the content-type entry in the JSON response’s headers map, if present.</p></li>
<li><p>cluster: fixed the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats-request-response-sizes" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">cluster stats</span></a> histograms by moving the accounting into the router
filter. This means that we now properly compute the number of bytes sent as well as handling retries which were previously ignored.</p></li>
<li><p>hot_restart: fix double counting of <code class="docutils literal notranslate"><span class="pre">server.seconds_until_first_ocsp_response_expiring</span></code> and <code class="docutils literal notranslate"><span class="pre">server.days_until_first_cert_expiring</span></code> during hot-restart. This stat was only incorrect until the parent process terminated.</p></li>
<li><p>http: fix erroneous handling of invalid nghttp2 frames with the <code class="docutils literal notranslate"><span class="pre">NGHTTP2_ERR_REFUSED_STREAM</span></code> error. Prior to the fix,
Envoy would close the entire connection when nghttp2 triggered the invalid frame callback for the said error. The fix
will cause Envoy to terminate just the refused stream and retain the connection. This behavior can be temporarily
reverted by setting the <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http2_consume_stream_refused_errors</span></code> runtime guard to false.</p></li>
<li><p>http: port stripping now works for CONNECT requests, though the port will be restored if the CONNECT request is sent upstream. This behavior can be temporarily reverted by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.strip_port_from_connect</span></code> to false.</p></li>
<li><p>jwt_authn: unauthorized responses now correctly include a <cite>www-authenticate</cite> header.</p></li>
<li><p>listener: fix a crash which could happen when a filter chain only listener update is followed by listener removal or a full listener update.</p></li>
<li><p>validation: fix an issue that causes TAP sockets to panic during config validation mode.</p></li>
<li><p>xray: fix the default sampling rate for AWS X-Ray tracer extension to be 5% as opposed to 50%.</p></li>
<li><p>zipkin: fix timestamp serialization in annotations. A prior bug fix exposed an issue with timestamps being serialized as strings.</p></li>
</ul>
</div>
<div class="section" id="removed-config-or-runtime">
<h2>Removed Config or Runtime<a class="headerlink" href="#removed-config-or-runtime" title="Permalink to this headline">¶</a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/version_history/version_history.html#deprecated" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p>event: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.activate_timers_next_event_loop</span></code> runtime guard and legacy code path.</p></li>
<li><p>gzip: removed legacy HTTP Gzip filter and runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.deprecated_features.allow_deprecated_gzip_http_filter</span></code>.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_500_after_100</span></code> runtime guard and the legacy code path.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.always_apply_route_header_rules</span></code> runtime guard and legacy code path.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.hcm_stream_error_on_invalid_message</span></code> for disabling closing HTTP/1.1 connections on error. Connection-closing can still be disabled by setting the HTTP/1 configuration <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http1protocoloptions-override-stream-error-on-invalid-http-message" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">override_stream_error_on_invalid_http_message</span></a>.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_set_copy_replace_all_headers</span></code> runtime guard and legacy code paths.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.overload_manager_disable_keepalive_drain_http2</span></code>; Envoy will now always send GOAWAY to HTTP2 downstreams when the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/operations/overload_manager/overload_manager.html#config-overload-manager-overload-actions" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">disable_keepalive</span></a> overload action is active.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_match_on_all_headers</span></code> runtime guard and legacy code paths.</p></li>
<li><p>http: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.unify_grpc_handling</span></code> runtime guard and legacy code paths.</p></li>
<li><p>tls: removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tls_use_io_handle_bio</span></code> runtime guard and legacy code path.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access_log: added the new response flag for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/data/accesslog/v3/accesslog.proto.html#envoy-v3-api-field-data-accesslog-v3-responseflags-overload-manager" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">overload manager termination</span></a>. The response flag will be set when the http stream is terminated by overload manager.</p></li>
<li><p>admission control: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/admission_control/v3alpha/admission_control.proto.html#envoy-v3-api-field-extensions-filters-http-admission-control-v3alpha-admissioncontrol-rps-threshold" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">rps_threshold</span></a> option that when average RPS of the sampling window is below this threshold, the filter will not throttle requests. Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/admission_control/v3alpha/admission_control.proto.html#envoy-v3-api-field-extensions-filters-http-admission-control-v3alpha-admissioncontrol-max-rejection-probability" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">max_rejection_probability</span></a> option to set an upper limit on the probability of rejection.</p></li>
<li><p>bandwidth_limit: added new <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/http/http_filters/bandwidth_limit_filter.html#config-http-filters-bandwidth-limit" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">HTTP bandwidth limit filter</span></a>.</p></li>
<li><p>bootstrap: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> to aggregate all of the DNS resolver configuration in a single message. By setting <code class="docutils literal notranslate"><span class="pre">no_default_search_domain</span></code> to true the DNS resolver will not use the default search domains. By setting the <code class="docutils literal notranslate"><span class="pre">resolvers</span></code> the external DNS servers to be used for external DNS queries can be specified.</p></li>
<li><p>cluster: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> to aggregate all of the DNS resolver configuration in a single message. By setting <code class="docutils literal notranslate"><span class="pre">no_default_search_domain</span></code> to true the DNS resolver will not use the default search domains.</p></li>
<li><p>cluster: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-weightedcluster-clusterweight-host-rewrite-literal" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">host_rewrite_literal</span></a> to WeightedCluster.</p></li>
<li><p>cluster: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-wait-for-warm-on-init" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">wait_for_warm_on_init</span></a>, which allows cluster readiness to not block on cluster warm-up. It is true by default, which preserves existing behavior. Currently, only applicable for DNS-based clusters.</p></li>
<li><p>composite filter: can now be used with filters that also add an access logger, such as the WASM filter.</p></li>
<li><p>config: added stat <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/overview/mgmt_server.html#subscription-statistics" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">config_reload_time_ms</span></a>.</p></li>
<li><p>connection_limit: added new <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/listeners/network_filters/connection_limit_filter.html#config-network-filters-connection-limit" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">Network connection limit filter</span></a>.</p></li>
<li><p>crash support: restore crash context when continuing to processing requests or responses as a result of an asynchronous callback that invokes a filter directly. This is unlike the call stacks that go through the various network layers, to eventually reach the filter. For a concrete example see: <code class="docutils literal notranslate"><span class="pre">Envoy::Extensions::HttpFilters::Cache::CacheFilter::getHeaders</span></code> which posts a callback on the dispatcher that will invoke the filter directly.</p></li>
<li><p>dns cache: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-preresolve-hostnames" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">preresolve_hostnames</span></a> option to the DNS cache config. This option allows hostnames to be preresolved into the cache upon cache creation. This might provide performance improvement, in the form of cache hits, for hostnames that are going to be resolved during steady state and are known at config load time.</p></li>
<li><p>dns cache: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-dns-query-timeout" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_query_timeout</span></a> option to the DNS cache config. This option allows explicitly controlling the timeout of underlying queries independently of the underlying DNS platform implementation. Coupled with success and failure retry policies the use of this timeout will lead to more deterministic DNS resolution times.</p></li>
<li><p>dns resolver: added <code class="docutils literal notranslate"><span class="pre">DnsResolverOptions</span></code> protobuf message to reconcile all of the DNS lookup option flags. By setting the configuration option <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/core/v3/resolver.proto.html#envoy-v3-api-field-config-core-v3-dnsresolveroptions-use-tcp-for-dns-lookups" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">use_tcp_for_dns_lookups</span></a> as true we can make the underlying dns resolver library to make only TCP queries to the DNS servers and by setting the configuration option <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/core/v3/resolver.proto.html#envoy-v3-api-field-config-core-v3-dnsresolveroptions-no-default-search-domain" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">no_default_search_domain</span></a> as true the DNS resolver library will not use the default search domains.</p></li>
<li><p>dns resolver: added <code class="docutils literal notranslate"><span class="pre">DnsResolutionConfig</span></code> to combine <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/core/v3/resolver.proto.html#envoy-v3-api-field-config-core-v3-dnsresolutionconfig-dns-resolver-options" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolver_options</span></a> and <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/core/v3/resolver.proto.html#envoy-v3-api-field-config-core-v3-dnsresolutionconfig-resolvers" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">resolvers</span></a> in a single protobuf message. The field <code class="docutils literal notranslate"><span class="pre">resolvers</span></code> can be specified with a list of DNS resolver addresses. If specified, DNS client library will perform resolution via the underlying DNS resolvers. Otherwise, the default system resolvers (e.g., /etc/resolv.conf) will be used.</p></li>
<li><p>dns_filter: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/udp/dns_filter/v3alpha/dns_filter.proto.html#envoy-v3-api-field-extensions-filters-udp-dns-filter-v3alpha-dnsfilterconfig-clientcontextconfig-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> to aggregate all of the DNS resolver configuration in a single message. By setting the configuration option <code class="docutils literal notranslate"><span class="pre">use_tcp_for_dns_lookups</span></code> to true we can make dns filter’s external resolvers to answer queries using TCP only, by setting the configuration option <code class="docutils literal notranslate"><span class="pre">no_default_search_domain</span></code> as true the DNS resolver will not use the default search domains. And by setting the configuration <code class="docutils literal notranslate"><span class="pre">resolvers</span></code> we can specify the external DNS servers to be used for external DNS query which replaces the pre-existing alpha api field <code class="docutils literal notranslate"><span class="pre">upstream_resolvers</span></code>.</p></li>
<li><p>dynamic_forward_proxy: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> option to the DNS cache config in order to aggregate all of the DNS resolver configuration in a single message. By setting one such configuration option <code class="docutils literal notranslate"><span class="pre">no_default_search_domain</span></code> as true the DNS resolver will not use the default search domains. And by setting the configuration <code class="docutils literal notranslate"><span class="pre">resolvers</span></code> we can specify the external DNS servers to be used for external DNS query instead of the system default resolvers.</p></li>
<li><p>ext_authz_filter: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-bootstrap-metadata-labels-key" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">bootstrap_metadata_labels_key</span></a> option to configure labels of destination service.</p></li>
<li><p>http: added new field <code class="docutils literal notranslate"><span class="pre">is_optional</span></code> to <code class="docutils literal notranslate"><span class="pre">extensions.filters.network.http_connection_manager.v3.HttpFilter</span></code>. When
set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, unsupported http filters will be ignored by envoy. This is also same with unsupported http filter
in the typed per filter config. For more information, please reference
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpfilter-is-optional" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">HttpFilter</span></a>.</p></li>
<li><p>http: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-scheme-header-transformation" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">scheme options</span></a> for adding or overwriting scheme.</p></li>
<li><p>http: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-strip-trailing-host-dot" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">stripping trailing host dot from host header</span></a> support.</p></li>
<li><p>http: added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-original-ip-detection-extensions" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">original IP detection extensions</span></a>.
Two initial extensions were added, the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/http/original_ip_detection/custom_header/v3/custom_header.proto.html#envoy-v3-api-msg-extensions-http-original-ip-detection-custom-header-v3-customheaderconfig" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">custom header</span></a> extension and the
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/http/original_ip_detection/xff/v3/xff.proto.html#envoy-v3-api-msg-extensions-http-original-ip-detection-xff-v3-xffconfig" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">xff</span></a> extension.</p></li>
<li><p>http: added a new option to upstream HTTP/2 <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http2protocoloptions-connection-keepalive" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">keepalive</span></a> to send a PING ahead of a new stream if the connection has been idle for a sufficient duration.</p></li>
<li><p>http: added the ability to <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-path-with-escaped-slashes-action" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">unescape slash sequences</span></a> in the path. Requests with unescaped slashes can be proxied, rejected or redirected to the new unescaped path. By default this feature is disabled. The default behavior can be overridden through <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/http/http_conn_man/runtime.html#config-http-conn-man-runtime-path-with-escaped-slashes-action" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">http_connection_manager.path_with_escaped_slashes_action</span></a> runtime variable. This action can be selectively enabled for a portion of requests by setting the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/http/http_conn_man/runtime.html#config-http-conn-man-runtime-path-with-escaped-slashes-action-enabled" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">http_connection_manager.path_with_escaped_slashes_action_sampling</span></a> runtime variable.</p></li>
<li><p>http: added upstream and downstream alpha HTTP/3 support! See <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/listener/v3/udp_listener_config.proto.html#envoy-v3-api-field-config-listener-v3-udplistenerconfig-quic-options" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">quic_options</span></a> for downstream and the new http3_protocol_options in <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/upstreams/http/v3/http_protocol_options.proto.html#envoy-v3-api-msg-extensions-upstreams-http-v3-httpprotocoloptions" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">http_protocol_options</span></a> for upstream HTTP/3.</p></li>
<li><p>http: raise max configurable max_request_headers_kb limit to 8192 KiB (8MiB) from 96 KiB in http connection manager.</p></li>
<li><p>input matcher: added a new input matcher that <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/matching/input_matchers/ip/v3/ip.proto.html#envoy-v3-api-file-envoy-extensions-matching-input-matchers-ip-v3-ip-proto" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">matches an IP address against a list of CIDR ranges</span></a>.</p></li>
<li><p>jwt_authn: added support to fetch remote jwks asynchronously specified by <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/jwt_authn/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-jwt-authn-v3-remotejwks-async-fetch" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">async_fetch</span></a>.</p></li>
<li><p>jwt_authn: added support to add padding in the forwarded JWT payload specified by <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/jwt_authn/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-jwt-authn-v3-jwtprovider-pad-forward-payload-header" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">pad_forward_payload_header</span></a>.</p></li>
<li><p>listener: added ability to change an existing listener’s address.</p></li>
<li><p>listener: added filter chain match support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/listener/v3/listener_components.proto.html#envoy-v3-api-field-config-listener-v3-filterchainmatch-direct-source-prefix-ranges" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">direct source address</span></a>.</p></li>
<li><p>local_rate_limit_filter: added support for locally rate limiting http requests on a per connection basis. This can be enabled by setting the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/http/local_ratelimit/v3/local_rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-local-ratelimit-v3-localratelimit-local-rate-limit-per-downstream-connection" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">local_rate_limit_per_downstream_connection</span></a> field to true.</p></li>
<li><p>metric service: added support for sending metric tags as labels. This can be enabled by setting the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/metrics/v3/metrics_service.proto.html#envoy-v3-api-field-config-metrics-v3-metricsserviceconfig-emit-tags-as-labels" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">emit_tags_as_labels</span></a> field to true.</p></li>
<li><p>proxy protocol: added support for generating the header while using the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/http/http_conn_man/http_conn_man.html#config-http-conn-man" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">HTTP connection manager</span></a>. This is done using the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/transport_sockets/proxy_protocol/v3/upstream_proxy_protocol.proto.html#extension-envoy-transport-sockets-upstream-proxy-protocol" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">Proxy Protocol Transport Socket</span></a> on upstream clusters.
This feature is currently affected by a memory leak <a class="reference external" href="https://github.com/envoyproxy/envoy/issues/16682">issue</a>.</p></li>
<li><p>req_without_query: added access log formatter extension implementing command operator <a class="reference internal" href="../api-v3/extensions/formatter/req_without_query/v3/req_without_query.proto.html#envoy-v3-api-msg-extensions-formatter-req-without-query-v3-reqwithoutquery"><span class="std std-ref">REQ_WITHOUT_QUERY</span></a> to log the request path, while excluding the query string.</p></li>
<li><p>router: added option <code class="docutils literal notranslate"><span class="pre">suppress_grpc_request_failure_code_stats</span></code> to <a class="reference internal" href="../api-v3/extensions/filters/http/router/v3/router.proto.html#envoy-v3-api-msg-extensions-filters-http-router-v3-router"><span class="std std-ref">the router</span></a> to allow users to exclude incrementing HTTP status code stats on gRPC requests.</p></li>
<li><p>stats: added native <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/stat_sinks/graphite_statsd/v3/graphite_statsd.proto.html#envoy-v3-api-msg-extensions-stat-sinks-graphite-statsd-v3-graphitestatsdsink" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">Graphite-formatted tag</span></a> support.</p></li>
<li><p>tcp: added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-msg-config-cluster-v3-cluster-preconnectpolicy" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">preconnecting</span></a>. Preconnecting is off by default, but recommended for clusters serving latency-sensitive traffic.</p></li>
<li><p>thrift_proxy: added per upstream metrics within the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/thrift_proxy/router/v3/router.proto.html#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-router-v3-router" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">thrift router</span></a> for request and response size histograms.</p></li>
<li><p>thrift_proxy: added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/intro/arch_overview/upstream/outlier.html#arch-overview-outlier-detection" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">outlier detection</span></a>.</p></li>
<li><p>tls: allow dual ECDSA/RSA certs via SDS. Previously, SDS only supported a single certificate per context, and dual cert was only supported via non-SDS.</p></li>
<li><p>tracing: add option <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/request_id/uuid/v3/uuid.proto.html#envoy-v3-api-field-extensions-request-id-uuid-v3-uuidrequestidconfig-use-request-id-for-trace-sampling" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">use_request_id_for_trace_sampling</span></a> which allows configuring whether to perform sampling based on <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-request-id" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">x-request-id</span></a> or not.</p></li>
<li><p>udp_proxy: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto.html#envoy-v3-api-msg-extensions-filters-udp-udp-proxy-v3-udpproxyconfig-hashpolicy" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">key</span></a> as another hash policy to support hash based routing on any given key.</p></li>
<li><p>windows container image: added user, EnvoyUser which is part of the Network Configuration Operators group to the container image.</p></li>
</ul>
</div>
<div class="section" id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>bootstrap: the field <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-use-tcp-for-dns-lookups" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">use_tcp_for_dns_lookups</span></a> is deprecated in favor of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> which aggregates all of the DNS resolver configuration in a single message.</p></li>
<li><p>cluster: the fields <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-use-tcp-for-dns-lookups" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">use_tcp_for_dns_lookups</span></a> and <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-dns-resolvers" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolvers</span></a> are deprecated in favor of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> which aggregates all of the DNS resolver configuration in a single message.</p></li>
<li><p>dns_filter: the field <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/data/dns/v3/dns_table.proto.html#envoy-v3-api-field-data-dns-v3-dnstable-known-suffixes" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">known_suffixes</span></a> is deprecated. The internal data management of the filter has changed and the filter no longer uses the known_suffixes field.</p></li>
<li><p>dynamic_forward_proxy: the field <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-use-tcp-for-dns-lookups" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">use_tcp_for_dns_lookups</span></a> is deprecated in favor of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-dns-resolution-config" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">dns_resolution_config</span></a> which aggregates all of the DNS resolver configuration in a single message.</p></li>
<li><p>http: <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-xff-num-trusted-hops" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">xff_num_trusted_hops</span></a> is deprecated in favor of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.19.1/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-original-ip-detection-extensions" title="(in envoy vtag-v1.19.1)"><span class="xref std std-ref">original IP detection extensions</span></a>.</p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.19.1.html" class="btn btn-neutral float-left" title="1.19.1 (Aug 24, 2021)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="v1.18.4.html" class="btn btn-neutral float-right" title="1.18.4 (Aug 24, 2021)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>