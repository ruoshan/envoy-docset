

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>TLS transport socket &mdash; envoy 1.17.0-5c801b documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Resource monitors" href="../../../config/resource_monitor/resource_monitor.html" />
    <link rel="prev" title="Raw Buffer" href="../../../config/transport_socket/raw_buffer/v2/raw_buffer.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.17.0-5c801b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../api.html">v2 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/listener/listener.html">Listener</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/grpc_credential/grpc_credential.html">Grpc Credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/retry/retry.html">Retry Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/trace/trace.html">HTTP Tracers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-v3/api.html">v3 API reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../api.html">v2 API reference</a> &raquo;</li>
        
          <li><a href="../../../config/config.html">Extensions</a> &raquo;</li>
        
          <li><a href="../../../config/transport_socket/transport_socket.html">Transport sockets</a> &raquo;</li>
        
      <li>TLS transport socket</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v2/api/v2/auth/tls.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tls-transport-socket">
<span id="envoy-api-file-envoy-api-v2-auth-tls-proto"></span><h1>TLS transport socket<a class="headerlink" href="#tls-transport-socket" title="Permalink to this headline">Â¶</a></h1>
<p id="extension-envoy-transport-sockets-tls">This extension may be referenced by the qualified name <em>envoy.transport_sockets.tls</em></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This extension is intended to be robust against both untrusted downstream and upstream traffic.</p>
</div>
<p>The TLS contexts below provide the transport socket configuration for upstream/downstream TLS.</p>
<div class="section" id="auth-upstreamtlscontext">
<span id="envoy-api-msg-auth-upstreamtlscontext"></span><h2>auth.UpstreamTlsContext<a class="headerlink" href="#auth-upstreamtlscontext" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/api/v2/auth/tls.proto#L25">[auth.UpstreamTlsContext proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;common_tls_context&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;sni&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;allow_renegotiation&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_session_keys&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-api-field-auth-upstreamtlscontext-common-tls-context">
<dt>common_tls_context</dt><dd><p>(<a class="reference internal" href="#envoy-api-msg-auth-commontlscontext"><span class="std std-ref">auth.CommonTlsContext</span></a>) Common TLS context settings.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Server certificate verification is not enabled by default. Configure
<a class="reference internal" href="common.proto.html#envoy-api-field-auth-certificatevalidationcontext-trusted-ca"><span class="std std-ref">trusted_ca</span></a> to enable
verification.</p>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-api-field-auth-upstreamtlscontext-sni">
<dt>sni</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) SNI string to use when creating TLS backend connections.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-upstreamtlscontext-allow-renegotiation">
<dt>allow_renegotiation</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If true, server-initiated TLS renegotiation will be allowed.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>TLS renegotiation is considered insecure and shouldnât be used unless absolutely necessary.</p>
</div>
</dd>
</dl>
<dl id="envoy-api-field-auth-upstreamtlscontext-max-session-keys">
<dt>max_session_keys</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Maximum number of session keys (Pre-Shared Keys for TLSv1.3+, Session IDs and Session Tickets
for TLSv1.2 and older) to store for the purpose of session resumption.</p>
<p>Defaults to 1, setting this to 0 disables session resumption.</p>
</dd>
</dl>
</div>
<div class="section" id="auth-downstreamtlscontext">
<span id="envoy-api-msg-auth-downstreamtlscontext"></span><h2>auth.DownstreamTlsContext<a class="headerlink" href="#auth-downstreamtlscontext" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/api/v2/auth/tls.proto#L53">[auth.DownstreamTlsContext proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;common_tls_context&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;require_client_certificate&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;session_ticket_keys&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;session_ticket_keys_sds_secret_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;disable_stateless_session_resumption&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;session_timeout&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-api-field-auth-downstreamtlscontext-common-tls-context">
<dt>common_tls_context</dt><dd><p>(<a class="reference internal" href="#envoy-api-msg-auth-commontlscontext"><span class="std std-ref">auth.CommonTlsContext</span></a>) Common TLS context settings.</p>
</dd>
</dl>
<dl class="simple" id="envoy-api-field-auth-downstreamtlscontext-require-client-certificate">
<dt>require_client_certificate</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) If specified, Envoy will reject connections without a valid client
certificate.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-downstreamtlscontext-session-ticket-keys">
<dt>session_ticket_keys</dt><dd><p>(<a class="reference internal" href="common.proto.html#envoy-api-msg-auth-tlssessionticketkeys"><span class="std std-ref">auth.TlsSessionTicketKeys</span></a>) TLS session ticket key settings.</p>
<p>Only one of <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys"><span class="std std-ref">session_ticket_keys</span></a>, <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config"><span class="std std-ref">session_ticket_keys_sds_secret_config</span></a>, <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-disable-stateless-session-resumption"><span class="std std-ref">disable_stateless_session_resumption</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config">
<dt>session_ticket_keys_sds_secret_config</dt><dd><p>(<a class="reference internal" href="secret.proto.html#envoy-api-msg-auth-sdssecretconfig"><span class="std std-ref">auth.SdsSecretConfig</span></a>) Config for fetching TLS session ticket keys via SDS API.</p>
<p>Only one of <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys"><span class="std std-ref">session_ticket_keys</span></a>, <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config"><span class="std std-ref">session_ticket_keys_sds_secret_config</span></a>, <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-disable-stateless-session-resumption"><span class="std std-ref">disable_stateless_session_resumption</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-downstreamtlscontext-disable-stateless-session-resumption">
<dt>disable_stateless_session_resumption</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Config for controlling stateless TLS session resumption: setting this to true will cause the TLS
server to not issue TLS session tickets for the purposes of stateless TLS session resumption.
If set to false, the TLS server will issue TLS session tickets and encrypt/decrypt them using
the keys specified through either <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys"><span class="std std-ref">session_ticket_keys</span></a>
or <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config"><span class="std std-ref">session_ticket_keys_sds_secret_config</span></a>.
If this config is set to false and no keys are explicitly configured, the TLS server will issue
TLS session tickets and encrypt/decrypt them using an internally-generated and managed key, with the
implication that sessions cannot be resumed across hot restarts or on different hosts.</p>
<p>Only one of <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys"><span class="std std-ref">session_ticket_keys</span></a>, <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-session-ticket-keys-sds-secret-config"><span class="std std-ref">session_ticket_keys_sds_secret_config</span></a>, <a class="reference internal" href="#envoy-api-field-auth-downstreamtlscontext-disable-stateless-session-resumption"><span class="std std-ref">disable_stateless_session_resumption</span></a> may be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-api-field-auth-downstreamtlscontext-session-timeout">
<dt>session_timeout</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) If specified, session_timeout will change maximum lifetime (in seconds) of TLS session
Currently this value is used as a hint to <cite>TLS session ticket lifetime (for TLSv1.2)
&lt;https://tools.ietf.org/html/rfc5077#section-5.6&gt;</cite>
only seconds could be specified (fractional seconds are going to be ignored).</p>
</dd>
</dl>
</div>
<div class="section" id="auth-commontlscontext">
<span id="envoy-api-msg-auth-commontlscontext"></span><h2>auth.CommonTlsContext<a class="headerlink" href="#auth-commontlscontext" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/api/v2/auth/tls.proto#L95">[auth.CommonTlsContext proto]</a></p>
<p>TLS context shared by both client and server TLS contexts.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;tls_params&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;tls_certificates&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;tls_certificate_sds_secret_configs&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;validation_context&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;validation_context_sds_secret_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;combined_validation_context&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;alpn_protocols&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-api-field-auth-commontlscontext-tls-params">
<dt>tls_params</dt><dd><p>(<a class="reference internal" href="common.proto.html#envoy-api-msg-auth-tlsparameters"><span class="std std-ref">auth.TlsParameters</span></a>) TLS protocol versions, cipher suites etc.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-commontlscontext-tls-certificates">
<dt>tls_certificates</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="common.proto.html#envoy-api-msg-auth-tlscertificate"><span class="std std-ref">auth.TlsCertificate</span></a>) <a class="reference internal" href="../../../../intro/arch_overview/security/ssl.html#arch-overview-ssl-cert-select"><span class="std std-ref">Multiple TLS certificates</span></a> can be associated with the
same context to allow both RSA and ECDSA certificates.</p>
<p>Only a single TLS certificate is supported in client contexts. In server contexts, the first
RSA certificate is used for clients that only support RSA and the first ECDSA certificate is
used for clients that support ECDSA.</p>
</dd>
</dl>
<dl class="simple" id="envoy-api-field-auth-commontlscontext-tls-certificate-sds-secret-configs">
<dt>tls_certificate_sds_secret_configs</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="secret.proto.html#envoy-api-msg-auth-sdssecretconfig"><span class="std std-ref">auth.SdsSecretConfig</span></a>) Configs for fetching TLS certificates via SDS API.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-commontlscontext-validation-context">
<dt>validation_context</dt><dd><p>(<a class="reference internal" href="common.proto.html#envoy-api-msg-auth-certificatevalidationcontext"><span class="std std-ref">auth.CertificateValidationContext</span></a>) How to validate peer certificates.</p>
<p>Only one of <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-validation-context"><span class="std std-ref">validation_context</span></a>, <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-validation-context-sds-secret-config"><span class="std std-ref">validation_context_sds_secret_config</span></a>, <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-combined-validation-context"><span class="std std-ref">combined_validation_context</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-commontlscontext-validation-context-sds-secret-config">
<dt>validation_context_sds_secret_config</dt><dd><p>(<a class="reference internal" href="secret.proto.html#envoy-api-msg-auth-sdssecretconfig"><span class="std std-ref">auth.SdsSecretConfig</span></a>) Config for fetching validation context via SDS API.</p>
<p>Only one of <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-validation-context"><span class="std std-ref">validation_context</span></a>, <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-validation-context-sds-secret-config"><span class="std std-ref">validation_context_sds_secret_config</span></a>, <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-combined-validation-context"><span class="std std-ref">combined_validation_context</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-commontlscontext-combined-validation-context">
<dt>combined_validation_context</dt><dd><p>(<a class="reference internal" href="#envoy-api-msg-auth-commontlscontext-combinedcertificatevalidationcontext"><span class="std std-ref">auth.CommonTlsContext.CombinedCertificateValidationContext</span></a>) Combined certificate validation context holds a default CertificateValidationContext
and SDS config. When SDS server returns dynamic CertificateValidationContext, both dynamic
and default CertificateValidationContext are merged into a new CertificateValidationContext
for validation. This merge is done by Message::MergeFrom(), so dynamic
CertificateValidationContext overwrites singular fields in default
CertificateValidationContext, and concatenates repeated fields to default
CertificateValidationContext, and logical OR is applied to boolean fields.</p>
<p>Only one of <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-validation-context"><span class="std std-ref">validation_context</span></a>, <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-validation-context-sds-secret-config"><span class="std std-ref">validation_context_sds_secret_config</span></a>, <a class="reference internal" href="#envoy-api-field-auth-commontlscontext-combined-validation-context"><span class="std std-ref">combined_validation_context</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-api-field-auth-commontlscontext-alpn-protocols">
<dt>alpn_protocols</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Supplies the list of ALPN protocols that the listener should expose. In
practice this is likely to be set to one of two values (see the
<a class="reference internal" href="../../../config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-codec-type"><span class="std std-ref">codec_type</span></a>
parameter in the HTTP connection manager for more information):</p>
<ul class="simple">
<li><p>âh2,http/1.1â If the listener is going to support both HTTP/2 and HTTP/1.1.</p></li>
<li><p>âhttp/1.1â If the listener is only going to support HTTP/1.1.</p></li>
</ul>
<p>There is no default for this parameter. If empty, Envoy will not expose ALPN.</p>
</dd>
</dl>
</div>
<div class="section" id="auth-commontlscontext-combinedcertificatevalidationcontext">
<span id="envoy-api-msg-auth-commontlscontext-combinedcertificatevalidationcontext"></span><h2>auth.CommonTlsContext.CombinedCertificateValidationContext<a class="headerlink" href="#auth-commontlscontext-combinedcertificatevalidationcontext" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/api/v2/auth/tls.proto#L96">[auth.CommonTlsContext.CombinedCertificateValidationContext proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;default_validation_context&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;validation_context_sds_secret_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-api-field-auth-commontlscontext-combinedcertificatevalidationcontext-default-validation-context">
<dt>default_validation_context</dt><dd><p>(<a class="reference internal" href="common.proto.html#envoy-api-msg-auth-certificatevalidationcontext"><span class="std std-ref">auth.CertificateValidationContext</span></a>, <em>REQUIRED</em>) How to validate peer certificates.</p>
</dd>
</dl>
<dl class="simple" id="envoy-api-field-auth-commontlscontext-combinedcertificatevalidationcontext-validation-context-sds-secret-config">
<dt>validation_context_sds_secret_config</dt><dd><p>(<a class="reference internal" href="secret.proto.html#envoy-api-msg-auth-sdssecretconfig"><span class="std std-ref">auth.SdsSecretConfig</span></a>, <em>REQUIRED</em>) Config for fetching validation context via SDS API.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../config/resource_monitor/resource_monitor.html" class="btn btn-neutral float-right" title="Resource monitors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../../config/transport_socket/raw_buffer/v2/raw_buffer.proto.html" class="btn btn-neutral float-left" title="Raw Buffer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2021, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>