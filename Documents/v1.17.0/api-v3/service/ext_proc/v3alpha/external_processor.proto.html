

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>External Processing Service &mdash; envoy 1.17.0-5c801b documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="OAuth" href="../../../extensions/filters/http/oauth2/v3alpha/oauth.proto.html" />
    <link rel="prev" title="External Processing Filter" href="../../../extensions/filters/http/ext_proc/v3alpha/processing_mode.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.17.0-5c801b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../configuration/configuration.html">Configuration reference</a> &raquo;</li>
        
          <li><a href="../../../../configuration/http/http.html">HTTP</a> &raquo;</li>
        
          <li><a href="../../../../configuration/http/http_filters/http_filters.html">HTTP filters</a> &raquo;</li>
        
      <li>External Processing Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/api-v3/service/ext_proc/v3alpha/external_processor.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="external-processing-service">
<span id="envoy-v3-api-file-envoy-service-ext-proc-v3alpha-external-processor-proto"></span><h1>External Processing Service<a class="headerlink" href="#external-processing-service" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This API is work-in-progress and is subject to breaking changes.</p>
</div>
<p>A service that can access and modify HTTP requests and responses
as part of a filter chain.
The overall external processing protocol works like this:</p>
<ol class="arabic simple">
<li><p>Envoy sends to the service information about the HTTP request.</p></li>
<li><p>The service sends back a ProcessingResponse message that directs Envoy
to either stop processing, continue without it, or send it the
next chunk of the message body.</p></li>
<li><p>If so requested, Envoy sends the server chunks of the message body,
or the entire body at once. In either case, the server sends back
a ProcessingResponse after each message it receives.</p></li>
<li><p>If so requested, Envoy sends the server the HTTP trailers,
and the server sends back a ProcessingResponse.</p></li>
<li><p>At this point, request processing is done, and we pick up again
at step 1 when Envoy receives a response from the upstream server.</p></li>
<li><p>At any point above, if the server closes the gRPC stream cleanly,
then Envoy proceeds without consulting the server.</p></li>
<li><p>At any point above, if the server closes the gRPC stream with an error,
then Envoy returns a 500 error to the client, unless the filter
was configured to ignore errors.</p></li>
</ol>
<p>In other words, the process is a request/response conversation, but
using a gRPC stream to make it easier for the server to
maintain state.</p>
<div class="section" id="service-ext-proc-v3alpha-processingrequest">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-processingrequest"></span><h2>service.ext_proc.v3alpha.ProcessingRequest<a class="headerlink" href="#service-ext-proc-v3alpha-processingrequest" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L59">[service.ext_proc.v3alpha.ProcessingRequest proto]</a></p>
<p>This represents the different types of messages that Envoy can send
to an external processing server.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;async_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_body&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_body&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_trailers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_trailers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-async-mode">
<dt>async_mode</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Specify whether the filter that sent this request is running in synchronous
or asynchronous mode. If false, then the server must either respond
with exactly one ProcessingResponse message or close the stream.
If true, however, then the server must not respond with
an additional message, although it may still close the stream.
The choice of synchronous or asynchronous mode can be chosen in the
filter configuration.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers">
<dt>request_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-httpheaders"><span class="std std-ref">service.ext_proc.v3alpha.HttpHeaders</span></a>) Information about the HTTP request headers, as well as peer info and additional
properties. If “response_required” is set, the server must send back a
HeaderResponse message, an ImmediateResponse message, or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers">
<dt>response_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-httpheaders"><span class="std std-ref">service.ext_proc.v3alpha.HttpHeaders</span></a>) Information about the HTTP response headers, as well as peer info and additional
properties. If “response_required” is set, the server must send back a
HeaderResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body">
<dt>request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-httpbody"><span class="std std-ref">service.ext_proc.v3alpha.HttpBody</span></a>) A chunk of the HTTP request body. If “response_required” is set, the server must send back
a BodyResponse message, an ImmediateResponse message, or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body">
<dt>response_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-httpbody"><span class="std std-ref">service.ext_proc.v3alpha.HttpBody</span></a>) A chunk of the HTTP request body. If “response_required” is set, the server must send back
a BodyResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers">
<dt>request_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-httptrailers"><span class="std std-ref">service.ext_proc.v3alpha.HttpTrailers</span></a>) The HTTP trailers for the request path. If “response_required” is set, the server
must send back a TrailerResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers">
<dt>response_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-httptrailers"><span class="std std-ref">service.ext_proc.v3alpha.HttpTrailers</span></a>) The HTTP trailers for the response path. If “response_required” is set, the server
must send back a TrailerResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-processingresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-processingresponse"></span><h2>service.ext_proc.v3alpha.ProcessingResponse<a class="headerlink" href="#service-ext-proc-v3alpha-processingresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L106">[service.ext_proc.v3alpha.ProcessingResponse proto]</a></p>
<p>For every ProcessingRequest received by the server with the “async_mode” field
set to false, the server must send back exactly one ProcessingResponse message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;request_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_body&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_body&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_trailers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_trailers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;immediate_response&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dynamic_metadata&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;mode_override&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers">
<dt>request_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-headersresponse"><span class="std std-ref">service.ext_proc.v3alpha.HeadersResponse</span></a>) The server must send back this message in response to a message with the
“request_headers” field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers">
<dt>response_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-headersresponse"><span class="std std-ref">service.ext_proc.v3alpha.HeadersResponse</span></a>) The server must send back this message in response to a message with the
“response_headers” field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body">
<dt>request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-bodyresponse"><span class="std std-ref">service.ext_proc.v3alpha.BodyResponse</span></a>) The server must send back this message in response to a message with
the “request_body” field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body">
<dt>response_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-bodyresponse"><span class="std std-ref">service.ext_proc.v3alpha.BodyResponse</span></a>) The server must send back this message in response to a message with
the “response_body” field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers">
<dt>request_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-trailersresponse"><span class="std std-ref">service.ext_proc.v3alpha.TrailersResponse</span></a>) The server must send back this message in response to a message with
the “request_trailers” field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers">
<dt>response_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-trailersresponse"><span class="std std-ref">service.ext_proc.v3alpha.TrailersResponse</span></a>) The server must send back this message in response to a message with
the “response_trailers” field set.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response">
<dt>immediate_response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-immediateresponse"><span class="std std-ref">service.ext_proc.v3alpha.ImmediateResponse</span></a>) If specified, attempt to create a locally generated response, send it
downstream, and stop processing additional filters and ignore any
additional messages received from the remote server for this request or
response. If a response has already started – for example, if this
message is sent response to a “response_body” message – then
this will either ship the reply directly to the downstream codec,
or reset the stream.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-dynamic-metadata">
<dt>dynamic_metadata</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>) Optional metadata that will be emitted as dynamic metadata to be consumed by the next
filter. This metadata will be placed in the namespace “envoy.filters.http.ext_proc”.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-processingresponse-mode-override">
<dt>mode_override</dt><dd><p>(<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3alpha/processing_mode.proto.html#envoy-v3-api-msg-extensions-filters-http-ext-proc-v3alpha-processingmode"><span class="std std-ref">extensions.filters.http.ext_proc.v3alpha.ProcessingMode</span></a>) Override how parts of the HTTP request and response are processed
for the duration of this particular request/response only. Servers
may use this to intelligently control how requests are processed
based on the headers and other metadata that they see.</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-httpheaders">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-httpheaders"></span><h2>service.ext_proc.v3alpha.HttpHeaders<a class="headerlink" href="#service-ext-proc-v3alpha-httpheaders" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L159">[service.ext_proc.v3alpha.HttpHeaders proto]</a></p>
<p>This message is sent to the external server when the HTTP request and responses
are first received.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;end_of_stream&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-httpheaders-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>) The HTTP request headers. All header keys will be
lower-cased, because HTTP header keys are case-insensitive.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-httpheaders-attributes">
<dt>attributes</dt><dd><p>(<strong>repeated</strong> map&lt;<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>&gt;) The values of properties selected by the “request_attributes”
or “response_attributes” list in the configuration. Each entry
in the list is populated
from the standard <a class="reference internal" href="../../../../intro/arch_overview/advanced/attributes.html#arch-overview-attributes"><span class="std std-ref">attributes</span></a>
supported across Envoy.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-httpheaders-end-of-stream">
<dt>end_of_stream</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If true, then there is no message body associated with this
request or response.</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-httpbody">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-httpbody"></span><h2>service.ext_proc.v3alpha.HttpBody<a class="headerlink" href="#service-ext-proc-v3alpha-httpbody" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L177">[service.ext_proc.v3alpha.HttpBody proto]</a></p>
<p>This message contains the message body that Envoy sends to the external server.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;end_of_stream&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-httpbody-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>)</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-httpbody-end-of-stream">
<dt>end_of_stream</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>)</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-httptrailers">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-httptrailers"></span><h2>service.ext_proc.v3alpha.HttpTrailers<a class="headerlink" href="#service-ext-proc-v3alpha-httptrailers" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L184">[service.ext_proc.v3alpha.HttpTrailers proto]</a></p>
<p>This message contains the trailers.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;trailers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-httptrailers-trailers">
<dt>trailers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>)</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-headersresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-headersresponse"></span><h2>service.ext_proc.v3alpha.HeadersResponse<a class="headerlink" href="#service-ext-proc-v3alpha-headersresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L191">[service.ext_proc.v3alpha.HeadersResponse proto]</a></p>
<p>This message must be sent in response to an HttpHeaders message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-headersresponse-response">
<dt>response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-commonresponse"><span class="std std-ref">service.ext_proc.v3alpha.CommonResponse</span></a>)</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-trailersresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-trailersresponse"></span><h2>service.ext_proc.v3alpha.TrailersResponse<a class="headerlink" href="#service-ext-proc-v3alpha-trailersresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L196">[service.ext_proc.v3alpha.TrailersResponse proto]</a></p>
<p>This message must be sent in response to an HttpTrailers message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;header_mutation&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-trailersresponse-header-mutation">
<dt>header_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-headermutation"><span class="std std-ref">service.ext_proc.v3alpha.HeaderMutation</span></a>) Instructions on how to manipulate the trailers</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-bodyresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-bodyresponse"></span><h2>service.ext_proc.v3alpha.BodyResponse<a class="headerlink" href="#service-ext-proc-v3alpha-bodyresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L202">[service.ext_proc.v3alpha.BodyResponse proto]</a></p>
<p>This message must be sent in response to an HttpBody message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-bodyresponse-response">
<dt>response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-commonresponse"><span class="std std-ref">service.ext_proc.v3alpha.CommonResponse</span></a>)</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-commonresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-commonresponse"></span><h2>service.ext_proc.v3alpha.CommonResponse<a class="headerlink" href="#service-ext-proc-v3alpha-commonresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L208">[service.ext_proc.v3alpha.CommonResponse proto]</a></p>
<p>This message contains common fields between header and body responses.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;header_mutation&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;body_mutation&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;trailers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;clear_route_cache&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-commonresponse-status">
<dt>status</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-enum-service-ext-proc-v3alpha-commonresponse-responsestatus"><span class="std std-ref">service.ext_proc.v3alpha.CommonResponse.ResponseStatus</span></a>) If set, provide additional direction on how the Envoy proxy should
handle the rest of the HTTP filter chain.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-commonresponse-header-mutation">
<dt>header_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-headermutation"><span class="std std-ref">service.ext_proc.v3alpha.HeaderMutation</span></a>) Instructions on how to manipulate the headers. When responding to an
HttpBody request, header mutations will only take effect if the
headers were not already sent further on the filter chain, which
happens only if the current processing mode for the body is BUFFERED
or BUFFERED_PARTIAL.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-commonresponse-body-mutation">
<dt>body_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-bodymutation"><span class="std std-ref">service.ext_proc.v3alpha.BodyMutation</span></a>) Replace the body of the last message sent to the remote server on this
stream. If responding to an HttpBody request, simply replace or clear
the body chunk that was sent with that request. If responding to an
HttpHeaders request, then a new body may be added to the request if this
message is returned along with the CONTINUE_AND_REPLACE status.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-commonresponse-trailers">
<dt>trailers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>) Add new trailers to the message. This may be used when responding to either a
HttpHeaders or HttpBody message, but only if this message is returned
along with the CONTINUE_AND_REPLACE status.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-commonresponse-clear-route-cache">
<dt>clear_route_cache</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clear the route cache for the current request.
This is necessary if the remote server
modified headers that are used to calculate the route.</p>
</dd>
</dl>
</div>
<div class="section" id="enum-service-ext-proc-v3alpha-commonresponse-responsestatus">
<span id="envoy-v3-api-enum-service-ext-proc-v3alpha-commonresponse-responsestatus"></span><h2>Enum service.ext_proc.v3alpha.CommonResponse.ResponseStatus<a class="headerlink" href="#enum-service-ext-proc-v3alpha-commonresponse-responsestatus" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L209">[service.ext_proc.v3alpha.CommonResponse.ResponseStatus proto]</a></p>
<dl class="simple" id="envoy-v3-api-enum-value-service-ext-proc-v3alpha-commonresponse-responsestatus-continue">
<dt>CONTINUE</dt><dd><p><em>(DEFAULT)</em> ⁣Apply the mutation instructions in this message to the
request or response, and then continue processing the filter
stream as normal. This is the default.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-service-ext-proc-v3alpha-commonresponse-responsestatus-continue-and-replace">
<dt>CONTINUE_AND_REPLACE</dt><dd><p>⁣Replace the request or response with the contents
of this message. If header_mutation is set, apply it to the
headers. If body_mutation is set and contains a body, then add that
body to the request or response, even if one does not already exist –
otherwise, clear the body. Any additional body and trailers
received from downstream or upstream will be ignored.
This can be used to add a body to a request or response that does not
have one already.</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-immediateresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-immediateresponse"></span><h2>service.ext_proc.v3alpha.ImmediateResponse<a class="headerlink" href="#service-ext-proc-v3alpha-immediateresponse" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L262">[service.ext_proc.v3alpha.ImmediateResponse proto]</a></p>
<p>This message causes the filter to attempt to create a locally
generated response, send it  downstream, stop processing
additional filters, and ignore any additional messages received
from the remote server for this request or response. If a response
has already started, then  this will either ship the reply directly
to the downstream codec, or reset the stream.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;grpc_status&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-immediateresponse-status">
<dt>status</dt><dd><p>(<a class="reference internal" href="../../../type/v3/http_status.proto.html#envoy-v3-api-msg-type-v3-httpstatus"><span class="std std-ref">type.v3.HttpStatus</span></a>, <em>REQUIRED</em>) The response code to return</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-immediateresponse-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-headermutation"><span class="std std-ref">service.ext_proc.v3alpha.HeaderMutation</span></a>) Apply changes to the default headers, which will include content-type.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-immediateresponse-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The message body to return with the response which is sent using the
text/plain content type, or encoded in the grpc-message header.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-immediateresponse-grpc-status">
<dt>grpc_status</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3alpha-grpcstatus"><span class="std std-ref">service.ext_proc.v3alpha.GrpcStatus</span></a>) If set, then include a gRPC status trailer.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-immediateresponse-details">
<dt>details</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) A string detailing why this local reply was sent, which may be included
in log and debug output.</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-grpcstatus">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-grpcstatus"></span><h2>service.ext_proc.v3alpha.GrpcStatus<a class="headerlink" href="#service-ext-proc-v3alpha-grpcstatus" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L282">[service.ext_proc.v3alpha.GrpcStatus proto]</a></p>
<p>This message specifies a gRPC status for an ImmediateResponse message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-grpcstatus-status">
<dt>status</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) The actual gRPC status</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-headermutation">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-headermutation"></span><h2>service.ext_proc.v3alpha.HeaderMutation<a class="headerlink" href="#service-ext-proc-v3alpha-headermutation" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L289">[service.ext_proc.v3alpha.HeaderMutation proto]</a></p>
<p>Change HTTP headers or trailers by appending, replacing, or removing
headers.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;set_headers&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;remove_headers&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-headermutation-set-headers">
<dt>set_headers</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headervalueoption"><span class="std std-ref">config.core.v3.HeaderValueOption</span></a>) Add or replace HTTP headers. Attempts to set the value of
any “x-envoy” header, and attempts to set the “:method”,
“:authority”, “:scheme”, or “host” headers will be ignored.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3alpha-headermutation-remove-headers">
<dt>remove_headers</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Remove these HTTP headers. Attempts to remove system headers –
any header starting with “:”, plus “host” – will be ignored.</p>
</dd>
</dl>
</div>
<div class="section" id="service-ext-proc-v3alpha-bodymutation">
<span id="envoy-v3-api-msg-service-ext-proc-v3alpha-bodymutation"></span><h2>service.ext_proc.v3alpha.BodyMutation<a class="headerlink" href="#service-ext-proc-v3alpha-bodymutation" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/5c801b25cae04f06bf48248c90e87d623d7a6283/api/envoy/service/ext_proc/v3alpha/external_processor.proto#L302">[service.ext_proc.v3alpha.BodyMutation proto]</a></p>
<p>Replace the entire message body chunk received in the corresponding
HttpBody message with this new body, or clear the body.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;clear_body&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-bodymutation-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>) The entire body to replace</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-bodymutation-body"><span class="std std-ref">body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-bodymutation-clear-body"><span class="std std-ref">clear_body</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3alpha-bodymutation-clear-body">
<dt>clear_body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clear the corresponding body chunk</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-bodymutation-body"><span class="std std-ref">body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3alpha-bodymutation-clear-body"><span class="std std-ref">clear_body</span></a> may be set.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../extensions/filters/http/oauth2/v3alpha/oauth.proto.html" class="btn btn-neutral float-right" title="OAuth" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../../extensions/filters/http/ext_proc/v3alpha/processing_mode.proto.html" class="btn btn-neutral float-left" title="External Processing Filter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2021, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>