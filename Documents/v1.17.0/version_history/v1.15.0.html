

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.15.0 (July 7, 2020) &mdash; envoy 1.17.0-5c801b documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.14.6 (December 7, 2020)" href="v1.14.6.html" />
    <link rel="prev" title="1.15.1 (September 29, 2020)" href="v1.15.1.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.17.0-5c801b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="version_history.html">Version history</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="current.html">1.17.0 (January 11, 2021)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.2.html">1.16.2 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.1.html">1.16.1 (November 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.0.html">1.16.0 (October 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.3.html">1.15.3 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.2.html">1.15.2 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.1.html">1.15.1 (September 29, 2020)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.15.0 (July 7, 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#incompatible-behavior-changes">Incompatible Behavior Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minor-behavior-changes">Minor Behavior Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removed-config-or-runtime">Removed Config or Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-features">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.6.html">1.14.6 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.5.html">1.14.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.4.html">1.14.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.3.html">1.14.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.2.html">1.14.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.1.html">1.14.1 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.0.html">1.14.0 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.7.html">1.13.7 (December 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.6.html">1.13.6 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.5.html">1.13.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.4.html">1.13.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.3.html">1.13.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.2.html">1.13.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.1.html">1.13.1 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.0.html">1.13.0 (January 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.7.html">1.12.7 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.6.html">1.12.6 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.5.html">1.12.5 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.4.html">1.12.4 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.3.html">1.12.3 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.2.html">1.12.2 (December 10, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.1.html">1.12.1 (November 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.0.html">1.12.0 (October 31, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.2.html">1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.1.html">1.11.1 (August 13, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.0.html">1.11.0 (July 11, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.10.0.html">1.10.0 (Apr 5, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.1.html">1.9.1 (Apr 2, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.0.html">1.9.0 (Dec 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.8.0.html">1.8.0 (Oct 4, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.7.0.html">1.7.0 (Jun 21, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.6.0.html">1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5.0.html">1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4.0.html">1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3.0.html">1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.0.html">1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.0.html">1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.0.html">1.0.0 (September 12, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="version_history.html">Version history</a> &raquo;</li>
        
      <li>1.15.0 (July 7, 2020)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/version_history/v1.15.0.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="july-7-2020">
<h1>1.15.0 (July 7, 2020)<a class="headerlink" href="#july-7-2020" title="Permalink to this headline">¶</a></h1>
<div class="section" id="incompatible-behavior-changes">
<h2>Incompatible Behavior Changes<a class="headerlink" href="#incompatible-behavior-changes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p>build: official released binary is now built on Ubuntu 18.04, requires glibc &gt;= 2.27.</p></li>
<li><p>client_ssl_auth: the <cite>auth_ip_white_list</cite> stat has been renamed to
<a class="reference internal" href="../configuration/listeners/network_filters/client_ssl_auth_filter.html#config-network-filters-client-ssl-auth-stats"><span class="std std-ref">auth_ip_allowlist</span></a>.</p></li>
<li><p>header to metadata: on_header_missing rules with empty values are now rejected (they were skipped before).</p></li>
<li><p>router: path_redirect now keeps query string by default. This behavior may be reverted by setting runtime feature <cite>envoy.reloadable_features.preserve_query_string_in_path_redirects</cite> to false.</p></li>
<li><p>tls: fixed a bug where wilcard matching for “*.foo.com” also matched domains of the form “a.b.foo.com”. This behavior can be temporarily reverted by setting runtime feature <cite>envoy.reloadable_features.fix_wildcard_matching</cite> to false.</p></li>
</ul>
</div>
<div class="section" id="minor-behavior-changes">
<h2>Minor Behavior Changes<a class="headerlink" href="#minor-behavior-changes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul class="simple">
<li><p>access loggers: applied existing buffer limits to access logs, as well as <a class="reference internal" href="../configuration/observability/access_log/stats.html#config-access-log-stats"><span class="std std-ref">stats</span></a> for logged / dropped logs. This can be reverted temporarily by setting runtime feature <cite>envoy.reloadable_features.disallow_unbounded_access_logs</cite> to false.</p></li>
<li><p>build: runs as non-root inside Docker containers. Existing behaviour can be restored by setting the environment variable <cite>ENVOY_UID</cite> to <cite>0</cite>. <cite>ENVOY_UID</cite> and <cite>ENVOY_GID</cite> can be used to set the envoy user’s <cite>uid</cite> and <cite>gid</cite> respectively.</p></li>
<li><p>health check: in the health check filter the <a class="reference internal" href="../api-v2/config/filter/http/health_check/v2/health_check.proto.html#envoy-api-field-config-filter-http-health-check-v2-healthcheck-cluster-min-healthy-percentages"><span class="std std-ref">percentage of healthy servers in upstream clusters</span></a> is now interpreted as an integer.</p></li>
<li><p>hot restart: added the option <a class="reference internal" href="../operations/cli.html#cmdoption-use-dynamic-base-id"><code class="xref std std-option docutils literal notranslate"><span class="pre">--use-dynamic-base-id</span></code></a> to select an unused base ID at startup and the option <a class="reference internal" href="../operations/cli.html#cmdoption-base-id-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">--base-id-path</span></code></a> to write the base id to a file (for reuse with later hot restarts).</p></li>
<li><p>http: changed early error path for HTTP/1.1 so that responses consistently flow through the http connection manager, and the http filter chains. This behavior may be temporarily reverted by setting runtime feature <cite>envoy.reloadable_features.early_errors_via_hcm</cite> to false.</p></li>
<li><p>http: fixed several bugs with applying correct connection close behavior across the http connection manager, health checker, and connection pool. This behavior may be temporarily reverted by setting runtime feature <cite>envoy.reloadable_features.fix_connection_close</cite> to false.</p></li>
<li><p>http: fixed a bug where the upgrade header was not cleared on responses to non-upgrade requests.
Can be reverted temporarily by setting runtime feature <cite>envoy.reloadable_features.fix_upgrade_response</cite> to false.</p></li>
<li><p>http: stopped overwriting <cite>date</cite> response headers. Responses without a <cite>date</cite> header will still have the header properly set. This behavior can be temporarily reverted by setting <cite>envoy.reloadable_features.preserve_upstream_date</cite> to false.</p></li>
<li><p>http: stopped adding a synthetic path to CONNECT requests, meaning unconfigured CONNECT requests will now return 404 instead of 403. This behavior can be temporarily reverted by setting <cite>envoy.reloadable_features.stop_faking_paths</cite> to false.</p></li>
<li><p>http: stopped allowing upstream 1xx or 204 responses with Transfer-Encoding or non-zero Content-Length headers. Content-Length of 0 is allowed, but stripped. This behavior can be temporarily reverted by setting <cite>envoy.reloadable_features.strict_1xx_and_204_response_headers</cite> to false.</p></li>
<li><p>http: upstream connections will now automatically set ALPN when this value is not explicitly set elsewhere (e.g. on the upstream TLS config). This behavior may be temporarily reverted by setting runtime feature <cite>envoy.reloadable_features.http_default_alpn</cite> to false.</p></li>
<li><p>listener: fixed a bug where when a static listener fails to be added to a worker, the listener was not removed from the active listener list.</p></li>
<li><p>router: extended to allow retries of streaming or incomplete requests. This removes stat <cite>rq_retry_skipped_request_not_complete</cite>.</p></li>
<li><p>router: extended to allow retries by default when upstream responds with <a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-x-envoy-overloaded-set"><span class="std std-ref">x-envoy-overloaded</span></a>.</p></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p>adaptive concurrency: fixed a minRTT calculation bug where requests started before the concurrency
limit was pinned to the minimum would skew the new minRTT value if the replies arrived after the
start of the new minRTT window.</p></li>
<li><p>buffer: fixed CVE-2020-12603 by avoiding fragmentation, and tracking of HTTP/2 data and control frames in the output buffer.</p></li>
<li><p>grpc-json: fixed a bug when in trailers only gRPC response (e.g. error) HTTP status code is not being re-written.</p></li>
<li><p>http: fixed a bug in the grpc_http1_reverse_bridge filter where header-only requests were forwarded with a non-zero content length.</p></li>
<li><p>http: fixed a bug where in some cases slash was moved from path to query string when <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-merge-slashes"><span class="std std-ref">merging of adjacent slashes</span></a> is enabled.</p></li>
<li><p>http: fixed CVE-2020-12604 by changing <a class="reference internal" href="../api-v2/config/filter/network/http_connection_manager/v2/http_connection_manager.proto.html#envoy-api-field-config-filter-network-http-connection-manager-v2-httpconnectionmanager-stream-idle-timeout"><span class="std std-ref">stream_idle_timeout</span></a>
to also defend against an HTTP/2 peer that does not open stream window once an entire response has been buffered to be sent to a downstream client.</p></li>
<li><p>http: fixed CVE-2020-12605 by including request URL in request header size computation, and rejecting partial headers that exceed configured limits.</p></li>
<li><p>http: fixed several bugs with applying correct connection close behavior across the http connection manager, health checker, and connection pool. This behavior may be temporarily reverted by setting runtime feature <cite>envoy.reloadable_features.fix_connection_close</cite> to false.</p></li>
<li><p>listener: fixed CVE-2020-8663 by adding runtime support for <a class="reference internal" href="../configuration/listeners/runtime.html#config-listeners-runtime"><span class="std std-ref">per-listener limits</span></a> on active/accepted connections.</p></li>
<li><p>overload management: fixed CVE-2020-8663 by adding runtime support for <a class="reference internal" href="../configuration/operations/overload_manager/overload_manager.html#config-overload-manager"><span class="std std-ref">global limits</span></a> on active/accepted connections.</p></li>
<li><p>prometheus stats: fixed the sort order of output lines to comply with the standard.</p></li>
<li><p>udp: the <a class="reference internal" href="../api-v2/api/v2/listener.proto.html#envoy-api-field-listener-reuse-port"><span class="std std-ref">reuse_port</span></a> listener option must now be
specified for UDP listeners if concurrency is &gt; 1. This previously crashed so is considered a
bug fix.</p></li>
<li><p>upstream: fixed a bug where Envoy would panic when receiving a GRPC SERVICE_UNKNOWN status on the health check.</p></li>
</ul>
</div>
<div class="section" id="removed-config-or-runtime">
<h2>Removed Config or Runtime<a class="headerlink" href="#removed-config-or-runtime" title="Permalink to this headline">¶</a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference internal" href="version_history.html#deprecated"><span class="std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p>http: removed legacy connection pool code and their runtime features: <cite>envoy.reloadable_features.new_http1_connection_pool_behavior</cite> and
<cite>envoy.reloadable_features.new_http2_connection_pool_behavior</cite>.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access loggers: added file access logger config <a class="reference internal" href="../api-v3/extensions/access_loggers/file/v3/file.proto.html#envoy-v3-api-field-extensions-access-loggers-file-v3-fileaccesslog-log-format"><span class="std std-ref">log_format</span></a>.</p></li>
<li><p>access loggers: added GRPC_STATUS operator on logging format.</p></li>
<li><p>access loggers: added gRPC access logger config added <a class="reference internal" href="../api-v3/extensions/access_loggers/grpc/v3/als.proto.html#envoy-v3-api-field-extensions-access-loggers-grpc-v3-commongrpcaccesslogconfig-transport-api-version"><span class="std std-ref">API version</span></a> to explicitly set the version of gRPC service endpoint and message to be used.</p></li>
<li><p>access loggers: extended specifier for FilterStateFormatter to output <a class="reference internal" href="../configuration/observability/access_log/usage.html#config-access-log-format-filter-state"><span class="std std-ref">unstructured log string</span></a>.</p></li>
<li><p>admin: added support for dumping EDS config at <a class="reference internal" href="../operations/admin.html#operations-admin-interface-config-dump-include-eds"><span class="std std-ref">/config_dump?include_eds</span></a>.</p></li>
<li><p>aggregate cluster: made route <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-retrypolicy-retry-priority"><span class="std std-ref">retry_priority</span></a> predicates work with <a class="reference internal" href="../api-v3/extensions/clusters/aggregate/v3/cluster.proto.html#envoy-v3-api-msg-extensions-clusters-aggregate-v3-clusterconfig"><span class="std std-ref">this cluster type</span></a>.</p></li>
<li><p>build: official released binary is now built on Ubuntu 18.04, requires glibc &gt;= 2.27.</p></li>
<li><p>build: official released binary is now built with Clang 10.0.0.</p></li>
<li><p>cluster: added an extension point for configurable <a class="reference internal" href="../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-upstream-config"><span class="std std-ref">upstreams</span></a>.</p></li>
<li><p>compressor: exposed generic <a class="reference internal" href="../configuration/http/http_filters/compressor_filter.html#config-http-filters-compressor"><span class="std std-ref">compressor</span></a> filter to users.</p></li>
<li><p>config: added <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">identifier</span></a> stat that reflects control plane identifier.</p></li>
<li><p>config: added <a class="reference internal" href="../configuration/upstream/cluster_manager/cds.html#config-cluster-manager-cds"><span class="std std-ref">version_text</span></a> stat that reflects xDS version.</p></li>
<li><p>decompressor: exposed generic <a class="reference internal" href="../configuration/http/http_filters/decompressor_filter.html#config-http-filters-decompressor"><span class="std std-ref">decompressor</span></a> filter to users.</p></li>
<li><p>dynamic forward proxy: added <a class="reference internal" href="../configuration/listeners/network_filters/sni_dynamic_forward_proxy_filter.html#config-network-filters-sni-dynamic-forward-proxy"><span class="std std-ref">SNI based dynamic forward proxy</span></a> support.</p></li>
<li><p>dynamic forward proxy: added configurable <a class="reference internal" href="../configuration/http/http_filters/dynamic_forward_proxy_filter.html#dns-cache-circuit-breakers"><span class="std std-ref">circuit breakers</span></a> for resolver on DNS cache.
This behavior can be temporarily disabled by the runtime feature <cite>envoy.reloadable_features.enable_dns_cache_circuit_breakers</cite>.
If this runtime feature is disabled, the upstream circuit breakers for the cluster will be used even if the <a class="reference internal" href="../configuration/http/http_filters/dynamic_forward_proxy_filter.html#dns-cache-circuit-breakers"><span class="std std-ref">DNS Cache circuit breakers</span></a> are configured.</p></li>
<li><p>dynamic forward proxy: added <a class="reference internal" href="../api-v3/extensions/clusters/dynamic_forward_proxy/v3/cluster.proto.html#envoy-v3-api-field-extensions-clusters-dynamic-forward-proxy-v3-clusterconfig-allow-insecure-cluster-options"><span class="std std-ref">allow_insecure_cluster_options</span></a> to allow disabling of auto_san_validation and auto_sni.</p></li>
<li><p>ext_authz filter: added <a class="reference internal" href="../api-v2/config/filter/http/ext_authz/v2/ext_authz.proto.html#envoy-api-field-config-filter-http-ext-authz-v2-extauthz-deny-at-disable"><span class="std std-ref">v2 deny_at_disable</span></a>, <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-deny-at-disable"><span class="std std-ref">v3 deny_at_disable</span></a>. This allows force denying protected paths while filter gets disabled, by setting this key to true.</p></li>
<li><p>ext_authz filter: added API version field for both <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-transport-api-version"><span class="std std-ref">HTTP</span></a>
and <a class="reference internal" href="../api-v3/extensions/filters/network/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-network-ext-authz-v3-extauthz-transport-api-version"><span class="std std-ref">Network</span></a> filters to explicitly set the version of gRPC service endpoint and message to be used.</p></li>
<li><p>ext_authz filter: added <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-upstream-headers-to-append"><span class="std std-ref">v3 allowed_upstream_headers_to_append</span></a> to allow appending multiple header entries (returned by the authorization server) with the same key to the original request headers.</p></li>
<li><p>fault: added support for controlling the percentage of requests that abort, delay and response rate limits faults
are applied to using <a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-http-header"><span class="std std-ref">HTTP headers</span></a> to the HTTP fault filter.</p></li>
<li><p>fault: added support for specifying grpc_status code in abort faults using
<a class="reference internal" href="../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-http-header"><span class="std std-ref">HTTP header</span></a> or abort fault configuration in HTTP fault filter.</p></li>
<li><p>filter: added <cite>upstream_rq_time</cite> stats to the GPRC stats filter.
Disabled by default and can be enabled via <a class="reference internal" href="../api-v3/extensions/filters/http/grpc_stats/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-grpc-stats-v3-filterconfig-enable-upstream-stats"><span class="std std-ref">enable_upstream_stats</span></a>.</p></li>
<li><p>grpc: added support for Google gRPC <a class="reference internal" href="../api-v3/config/core/v3/grpc_service.proto.html#envoy-v3-api-field-config-core-v3-grpcservice-googlegrpc-channel-args"><span class="std std-ref">custom channel arguments</span></a>.</p></li>
<li><p>grpc-json: added support for streaming response using
<a class="reference external" href="https://github.com/googleapis/googleapis/blob/master/google/api/httpbody.proto">google.api.HttpBody</a>.</p></li>
<li><p>grpc-json: send a <cite>x-envoy-original-method</cite> header to grpc services.</p></li>
<li><p>gzip filter: added option to set zlib’s next output buffer size.</p></li>
<li><p>hds: updated to allow to explicitly set the API version of gRPC service endpoint and message to be used.</p></li>
<li><p>header to metadata: added support for regex substitutions on header values.</p></li>
<li><p>health checks: allowed configuring health check transport sockets by specifying <a class="reference internal" href="../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-field-config-core-v3-healthcheck-transport-socket-match-criteria"><span class="std std-ref">transport socket match criteria</span></a>.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-local-reply-config"><span class="std std-ref">local_reply config</span></a> to http_connection_manager to customize <a class="reference internal" href="../configuration/http/http_conn_man/local_reply.html#config-http-conn-man-local-reply"><span class="std std-ref">local reply</span></a>.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-strip-matching-host-port"><span class="std std-ref">stripping port from host header</span></a> support.</p></li>
<li><p>http: added support for proxying CONNECT requests, terminating CONNECT requests, and converting raw TCP streams into HTTP/2 CONNECT requests. See <a class="reference internal" href="../intro/arch_overview/http/upgrades.html#arch-overview-upgrades"><span class="std std-ref">upgrade documentation</span></a> for details.</p></li>
<li><p>listener: added in place filter chain update flow for tcp listener update which doesn’t close connections if the corresponding network filter chain is equivalent during the listener update.
Can be disabled by setting runtime feature <cite>envoy.reloadable_features.listener_in_place_filterchain_update</cite> to false.
Also added additional draining filter chain stat for <a class="reference internal" href="../configuration/listeners/stats.html#config-listener-manager-stats"><span class="std std-ref">listener manager</span></a> to track the number of draining filter chains and the number of in place update attempts.</p></li>
<li><p>logger: added <cite>–log-format-prefix-with-location</cite> command line option to prefix ‘%v’ with file path and line number.</p></li>
<li><p>lrs: added new <em>envoy_api_field_service.load_stats.v2.LoadStatsResponse.send_all_clusters</em> field
in LRS response, which allows management servers to avoid explicitly listing all clusters it is
interested in; behavior is allowed based on new “envoy.lrs.supports_send_all_clusters” capability
in <a class="reference internal" href="../api-v3/config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-node-client-features"><span class="std std-ref">client_features</span></a> field.</p></li>
<li><p>lrs: updated to allow to explicitly set the API version of gRPC service endpoint and message to be used.</p></li>
<li><p>lua: added <a class="reference internal" href="../api-v3/extensions/filters/http/lua/v3/lua.proto.html#envoy-v3-api-msg-extensions-filters-http-lua-v3-luaperroute"><span class="std std-ref">per route config</span></a> for Lua filter.</p></li>
<li><p>lua: added tracing to the <code class="docutils literal notranslate"><span class="pre">httpCall()</span></code> API.</p></li>
<li><p>metrics service: added <a class="reference internal" href="../api-v3/config/metrics/v3/metrics_service.proto.html#envoy-v3-api-field-config-metrics-v3-metricsserviceconfig-transport-api-version"><span class="std std-ref">API version</span></a> to explicitly set the version of gRPC service endpoint and message to be used.</p></li>
<li><p>network filters: added a <a class="reference internal" href="../configuration/listeners/network_filters/postgres_proxy_filter.html#config-network-filters-postgres-proxy"><span class="std std-ref">postgres proxy filter</span></a>.</p></li>
<li><p>network filters: added a <a class="reference internal" href="../configuration/listeners/network_filters/rocketmq_proxy_filter.html#config-network-filters-rocketmq-proxy"><span class="std std-ref">rocketmq proxy filter</span></a>.</p></li>
<li><p>performance: enabled stats symbol table implementation by default. To disable it, add
<cite>–use-fake-symbol-table 1</cite> to the command-line arguments when starting Envoy.</p></li>
<li><p>ratelimit: added support for use of dynamic metadata <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-action-dynamic-metadata"><span class="std std-ref">dynamic_metadata</span></a> as a ratelimit action.</p></li>
<li><p>ratelimit: added <a class="reference internal" href="../api-v3/config/ratelimit/v3/rls.proto.html#envoy-v3-api-field-config-ratelimit-v3-ratelimitserviceconfig-transport-api-version"><span class="std std-ref">API version</span></a> to explicitly set the version of gRPC service endpoint and message to be used.</p></li>
<li><p>ratelimit: support specifying dynamic overrides in rate limit descriptors using <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-limit"><span class="std std-ref">limit override</span></a> config.</p></li>
<li><p>redis: added acl support <a class="reference internal" href="../api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-redis-proxy-v3-redisproxy-downstream-auth-username"><span class="std std-ref">downstream_auth_username</span></a> for downstream client ACL authentication, and <a class="reference internal" href="../api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-redis-proxy-v3-redisprotocoloptions-auth-username"><span class="std std-ref">auth_username</span></a> to configure authentication usernames for upstream Redis 6+ server clusters with ACL enabled.</p></li>
<li><p>regex: added support for enforcing max program size via runtime and stats to monitor program size for <a class="reference internal" href="../api-v3/type/matcher/v3/regex.proto.html#envoy-v3-api-field-type-matcher-v3-regexmatcher-googlere2-max-program-size"><span class="std std-ref">Google RE2</span></a>.</p></li>
<li><p>request_id: added to <a class="reference internal" href="../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-always-set-request-id-in-response"><span class="std std-ref">always_set_request_id_in_response setting</span></a>
to set <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-x-request-id"><span class="std std-ref">x-request-id</span></a> header in response even if
tracing is not forced.</p></li>
<li><p>router: added more fine grained internal redirect configs to the <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-internal-redirect-policy"><span class="std std-ref">internal_redirect_policy</span></a> field.</p></li>
<li><p>router: added regex substitution support for header based hashing.</p></li>
<li><p>router: added support for RESPONSE_FLAGS and RESPONSE_CODE_DETAILS <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header formatters</span></a>.</p></li>
<li><p>router: allow Rate Limiting Service to be called in case of missing request header for a descriptor if the <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-action-requestheaders-skip-if-absent"><span class="std std-ref">skip_if_absent</span></a> field is set to true.</p></li>
<li><p>runtime: added new gauge <a class="reference internal" href="../configuration/operations/runtime.html#runtime-stats"><span class="std std-ref">deprecated_feature_seen_since_process_start</span></a> that gets reset across hot restarts.</p></li>
<li><p>server: added the option <a class="reference internal" href="../operations/cli.html#cmdoption-drain-strategy"><code class="xref std std-option docutils literal notranslate"><span class="pre">--drain-strategy</span></code></a> to enable different drain strategies for DrainManager::drainClose().</p></li>
<li><p>server: added <a class="reference internal" href="../configuration/observability/statistics.html#server-statistics"><span class="std std-ref">server.envoy_bug_failures</span></a> statistic to count ENVOY_BUG failures.</p></li>
<li><p>stats: added the option to <a class="reference internal" href="../api-v3/config/metrics/v3/metrics_service.proto.html#envoy-v3-api-field-config-metrics-v3-metricsserviceconfig-report-counters-as-deltas"><span class="std std-ref">report counters as deltas</span></a> to the metrics service stats sink.</p></li>
<li><p>tracing: made tracing configuration fully dynamic and every HTTP connection manager
can now have a separate <a class="reference internal" href="../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-tracing-provider"><span class="std std-ref">tracing provider</span></a>.</p></li>
<li><p>udp: upgraded <a class="reference internal" href="../configuration/listeners/udp_filters/udp_proxy.html#config-udp-listener-filters-udp-proxy"><span class="std std-ref">udp_proxy</span></a> filter to v3 and promoted it out of alpha.</p></li>
</ul>
</div>
<div class="section" id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Tracing provider configuration as part of <a class="reference internal" href="../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-tracing"><span class="std std-ref">bootstrap config</span></a>
has been deprecated in favor of configuration as part of <a class="reference internal" href="../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-tracing-provider"><span class="std std-ref">HTTP connection manager</span></a>.</p></li>
<li><p>The <a class="reference internal" href="../configuration/http/http_filters/gzip_filter.html#config-http-filters-gzip"><span class="std std-ref">HTTP Gzip filter</span></a> has been deprecated in favor of
<a class="reference internal" href="../configuration/http/http_filters/compressor_filter.html#config-http-filters-compressor"><span class="std std-ref">Compressor</span></a>.</p></li>
<li><p>The * <a class="reference internal" href="../api-v3/type/matcher/v3/regex.proto.html#envoy-v3-api-field-type-matcher-v3-regexmatcher-googlere2-max-program-size"><span class="std std-ref">GoogleRE2.max_program_size</span></a>
field is now deprecated. Management servers are expected to validate regexp program sizes
instead of expecting the client to do it. Alternatively, the max program size can be enforced by Envoy via runtime.</p></li>
<li><p>The <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-internal-redirect-action"><span class="std std-ref">internal_redirect_action</span></a>
field and <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-max-internal-redirects"><span class="std std-ref">max_internal_redirects</span></a> field
are now deprecated. This changes the implemented default cross scheme redirect behavior.
All cross scheme redirects are disallowed by default. To restore
the previous behavior, set allow_cross_scheme_redirect=true and use
<a class="reference internal" href="../api-v3/extensions/internal_redirect/safe_cross_scheme/v3/safe_cross_scheme_config.proto.html#envoy-v3-api-msg-extensions-internal-redirect-safe-cross-scheme-v3-safecrossschemeconfig"><span class="std std-ref">safe_cross_scheme</span></a>,
in <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-internalredirectpolicy-predicates"><span class="std std-ref">predicates</span></a>.</p></li>
<li><p>File access logger fields <a class="reference internal" href="../api-v3/extensions/access_loggers/file/v3/file.proto.html#envoy-v3-api-field-extensions-access-loggers-file-v3-fileaccesslog-format"><span class="std std-ref">format</span></a>, <a class="reference internal" href="../api-v3/extensions/access_loggers/file/v3/file.proto.html#envoy-v3-api-field-extensions-access-loggers-file-v3-fileaccesslog-json-format"><span class="std std-ref">json_format</span></a> and <a class="reference internal" href="../api-v3/extensions/access_loggers/file/v3/file.proto.html#envoy-v3-api-field-extensions-access-loggers-file-v3-fileaccesslog-typed-json-format"><span class="std std-ref">typed_json_format</span></a> are deprecated in favor of <a class="reference internal" href="../api-v3/extensions/access_loggers/file/v3/file.proto.html#envoy-v3-api-field-extensions-access-loggers-file-v3-fileaccesslog-log-format"><span class="std std-ref">log_format</span></a>.</p></li>
<li><p>A warning is now logged when v2 xDS api is used. This behavior can be temporarily disabled by setting <cite>envoy.reloadable_features.enable_deprecated_v2_api_warning</cite> to <cite>false</cite>.</p></li>
<li><p>Using cluster circuit breakers for DNS Cache is now deprecated in favor of <a class="reference internal" href="../configuration/http/http_filters/dynamic_forward_proxy_filter.html#dns-cache-circuit-breakers"><span class="std std-ref">DNS cache circuit breakers</span></a>. This behavior can be temporarily disabled by setting <cite>envoy.reloadable_features.enable_dns_cache_circuit_breakers</cite> to <cite>false</cite>.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v1.14.6.html" class="btn btn-neutral float-right" title="1.14.6 (December 7, 2020)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v1.15.1.html" class="btn btn-neutral float-left" title="1.15.1 (September 29, 2020)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2021, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>