function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}export function formatCopyText(e,n,s=!1,t=!0,p=!0,o=!0,c="",r=""){var u,i,h=!!c,a=!!r;u=s?new RegExp("^("+n+")(.*)"):new RegExp("^("+escapeRegExp(n)+")(.*)");const x=[];var f=!1,g=!1,l=!1;const m=[];for(const n of e.split("\n"))(i=n.match(u))||g||l?(f=u.test(n),m.push(f),p&&f?x.push(i[2]):x.push(n),g=n.endsWith(c)&h,n.includes(r)&a&&(l=!l)):t?o&&""===n.trim()&&x.push(n):x.push(n);return m.some((e=>!0===e))&&(e=x.join("\n")),e.endsWith("\n")&&(e=e.slice(0,-1)),e}