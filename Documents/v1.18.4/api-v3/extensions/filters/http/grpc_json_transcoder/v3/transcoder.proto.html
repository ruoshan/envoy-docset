

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>gRPC-JSON transcoder &mdash; envoy tag-v1.18.4 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../_static/jquery.js"></script>
        <script src="../../../../../../_static/underscore.js"></script>
        <script src="../../../../../../_static/doctools.js"></script>
        <script src="../../../../../../_static/clipboard.min.js"></script>
        <script src="../../../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="gRPC statistics" href="../../grpc_stats/v3/config.proto.html" />
    <link rel="prev" title="gRPC HTTP/1.1 Reverse Bridge" href="../../grpc_http1_reverse_bridge/v3/config.proto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../../index.html">
          

          
            
            <img src="../../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                tag-v1.18.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/grpc_credential/grpc_credential.html">Grpc Credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/retry/retry.html">Retry Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/trace/trace.html">HTTP Tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/internal_redirect/internal_redirect.html">Internal Redirect Predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/upstream/upstream.html">Upstream Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/wasm/wasm.html">WASM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/watchdog/watchdog.html">Watchdog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/descriptors/descriptors.html">Rate limit descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/request_id/request_id.html">Request ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_formatters.html">HTTP header formatters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../version_history/version_history.html">Version history</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../../../api/api.html">API</a> &raquo;</li>
        
          <li><a href="../../../../../api.html">v3 API reference</a> &raquo;</li>
        
          <li><a href="../../../../../config/config.html">Extensions</a> &raquo;</li>
        
          <li><a href="../../../../../config/filter/filter.html">Filters</a> &raquo;</li>
        
          <li><a href="../../../../../config/filter/http/http.html">HTTP filters</a> &raquo;</li>
        
      <li>gRPC-JSON transcoder</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../../_sources/api-v3/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="grpc-json-transcoder">
<span id="envoy-v3-api-file-envoy-extensions-filters-http-grpc-json-transcoder-v3-transcoder-proto"></span><h1>gRPC-JSON transcoder<a class="headerlink" href="#grpc-json-transcoder" title="Permalink to this headline">¶</a></h1>
<p id="extension-envoy-filters-http-grpc-json-transcoder">This extension may be referenced by the qualified name <em>envoy.filters.http.grpc_json_transcoder</em></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This extension is intended to be robust against untrusted downstream traffic. It assumes that the upstream is trusted.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This extension extends and can be used with the following extension category:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../network/http_connection_manager/v3/http_connection_manager.proto.html#extension-category-envoy-filters-http"><span class="std std-ref">envoy.filters.http</span></a></p></li>
</ul>
</div>
<p>gRPC-JSON transcoder <a class="reference internal" href="../../../../../../configuration/http/http_filters/grpc_json_transcoder_filter.html#config-http-filters-grpc-json-transcoder"><span class="std std-ref">configuration overview</span></a>.</p>
<div class="section" id="extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder">
<span id="envoy-v3-api-msg-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder"></span><h2>extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder<a class="headerlink" href="#extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.18.4/api/envoy/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto#L26">[extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder proto]</a></p>
<p>GrpcJsonTranscoder filter configuration.
The filter itself can be used per route / per virtual host or on the general level. The most
specific one is being used for a given route. If the list of services is empty - filter
is considered to be disabled.
Note that if specifying the filter per route, first the route is matched, and then transcoding
filter is applied. It matters when specifying the route configuration and paths to match the
request - for per-route grpc transcoder configs, the original path should be matched, while
in other cases, the grpc-like path is expected (the one AFTER the filter is applied).</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;proto_descriptor&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;proto_descriptor_bin&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;services&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;print_options&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;match_incoming_request_route&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ignored_query_parameters&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;auto_mapping&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ignore_unknown_query_parameters&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;convert_grpc_status&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;url_unescape_spec&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_validation_options&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-proto-descriptor">
<dt>proto_descriptor</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Supplies the filename of
<a class="reference internal" href="../../../../../../configuration/http/http_filters/grpc_json_transcoder_filter.html#config-grpc-json-generate-proto-descriptor-set"><span class="std std-ref">the proto descriptor set</span></a> for the gRPC
services.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-proto-descriptor"><span class="std std-ref">proto_descriptor</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-proto-descriptor-bin"><span class="std std-ref">proto_descriptor_bin</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-proto-descriptor-bin">
<dt>proto_descriptor_bin</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>) Supplies the binary content of
<a class="reference internal" href="../../../../../../configuration/http/http_filters/grpc_json_transcoder_filter.html#config-grpc-json-generate-proto-descriptor-set"><span class="std std-ref">the proto descriptor set</span></a> for the gRPC
services.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-proto-descriptor"><span class="std std-ref">proto_descriptor</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-proto-descriptor-bin"><span class="std std-ref">proto_descriptor_bin</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-services">
<dt>services</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) A list of strings that
supplies the fully qualified service names (i.e. “package_name.service_name”) that
the transcoder will translate. If the service name doesn’t exist in <code class="docutils literal notranslate"><span class="pre">proto_descriptor</span></code>,
Envoy will fail at startup. The <code class="docutils literal notranslate"><span class="pre">proto_descriptor</span></code> may contain more services than
the service names specified here, but they won’t be translated.</p>
<p>By default, the filter will pass through requests that do not map to any specified services.
If the list of services is empty, filter is considered disabled.
However, this behavior changes if
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions-reject-unknown-method"><span class="std std-ref">reject_unknown_method</span></a>
is enabled.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-print-options">
<dt>print_options</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions"><span class="std std-ref">extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.PrintOptions</span></a>) Control options for response JSON. These options are passed directly to
<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.util.json_util#JsonPrintOptions">JsonPrintOptions</a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-match-incoming-request-route">
<dt>match_incoming_request_route</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to keep the incoming request route after the outgoing headers have been transformed to
the match the upstream gRPC service. Note: This means that routes for gRPC services that are
not transcoded cannot be used in combination with <em>match_incoming_request_route</em>.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-ignored-query-parameters">
<dt>ignored_query_parameters</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) A list of query parameters to be ignored for transcoding method mapping.
By default, the transcoder filter will not transcode a request if there are any
unknown/invalid query parameters.</p>
<p>Example :</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">service</span> <span class="n">Bookstore</span> <span class="p">{</span>
  <span class="k">rpc</span> <span class="n">GetShelf</span><span class="p">(</span><span class="n">GetShelfRequest</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">Shelf</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">option</span> <span class="p">(</span><span class="n">google.api.http</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">get</span><span class="o">:</span> <span class="s">&quot;/shelves/{shelf}&quot;</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">GetShelfRequest</span> <span class="p">{</span>
  <span class="kt">int64</span> <span class="na">shelf</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">Shelf</span> <span class="p">{}</span>
</pre></div>
</div>
<p>The request <code class="docutils literal notranslate"><span class="pre">/shelves/100?foo=bar</span></code> will not be mapped to <code class="docutils literal notranslate"><span class="pre">GetShelf`</span></code> because variable
binding for <code class="docutils literal notranslate"><span class="pre">foo</span></code> is not defined. Adding <code class="docutils literal notranslate"><span class="pre">foo</span></code> to <code class="docutils literal notranslate"><span class="pre">ignored_query_parameters</span></code> will allow
the same request to be mapped to <code class="docutils literal notranslate"><span class="pre">GetShelf</span></code>.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-auto-mapping">
<dt>auto_mapping</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to route methods without the <code class="docutils literal notranslate"><span class="pre">google.api.http</span></code> option.</p>
<p>Example :</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">bookstore</span><span class="p">;</span>

<span class="kd">service</span> <span class="n">Bookstore</span> <span class="p">{</span>
  <span class="k">rpc</span> <span class="n">GetShelf</span><span class="p">(</span><span class="n">GetShelfRequest</span><span class="p">)</span> <span class="k">returns</span> <span class="p">(</span><span class="n">Shelf</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">GetShelfRequest</span> <span class="p">{</span>
  <span class="kt">int64</span> <span class="na">shelf</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">Shelf</span> <span class="p">{}</span>
</pre></div>
</div>
<p>The client could <code class="docutils literal notranslate"><span class="pre">post</span></code> a json body <code class="docutils literal notranslate"><span class="pre">{&quot;shelf&quot;:</span> <span class="pre">1234}</span></code> with the path of
<code class="docutils literal notranslate"><span class="pre">/bookstore.Bookstore/GetShelfRequest</span></code> to call <code class="docutils literal notranslate"><span class="pre">GetShelfRequest</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-ignore-unknown-query-parameters">
<dt>ignore_unknown_query_parameters</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to ignore query parameters that cannot be mapped to a corresponding
protobuf field. Use this if you cannot control the query parameters and do
not know them beforehand. Otherwise use <code class="docutils literal notranslate"><span class="pre">ignored_query_parameters</span></code>.
Defaults to false.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-convert-grpc-status">
<dt>convert_grpc_status</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to convert gRPC status headers to JSON.
When trailer indicates a gRPC error and there was no HTTP body, take <code class="docutils literal notranslate"><span class="pre">google.rpc.Status</span></code>
from the <code class="docutils literal notranslate"><span class="pre">grpc-status-details-bin</span></code> header and use it as JSON body.
If there was no such header, make <code class="docutils literal notranslate"><span class="pre">google.rpc.Status</span></code> out of the <code class="docutils literal notranslate"><span class="pre">grpc-status</span></code> and
<code class="docutils literal notranslate"><span class="pre">grpc-message</span></code> headers.
The error details types must be present in the <code class="docutils literal notranslate"><span class="pre">proto_descriptor</span></code>.</p>
<p>For example, if an upstream server replies with headers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>grpc-status: 5
grpc-status-details-bin:
    CAUaMwoqdHlwZS5nb29nbGVhcGlzLmNvbS9nb29nbGUucnBjLlJlcXVlc3RJbmZvEgUKA3ItMQ
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">grpc-status-details-bin</span></code> header contains a base64-encoded protobuf message
<code class="docutils literal notranslate"><span class="pre">google.rpc.Status</span></code>. It will be transcoded into:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   HTTP/1.1 404 Not Found
   content-type: application/json

   {&quot;code&quot;:5,&quot;details&quot;:[{&quot;@type&quot;:&quot;type.googleapis.com/google.rpc.RequestInfo&quot;,&quot;requestId&quot;:&quot;r-1&quot;}]}

In order to transcode the message, the ``google.rpc.RequestInfo`` type from
the ``google/rpc/error_details.proto`` should be included in the configured
:ref:`proto descriptor set &lt;config_grpc_json_generate_proto_descriptor_set&gt;`.
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-url-unescape-spec">
<dt>url_unescape_spec</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-enum-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec"><span class="std std-ref">extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.UrlUnescapeSpec</span></a>) URL unescaping policy.
This spec is only applied when extracting variable with multiple segments.
For example, in case of <cite>/foo/{x=*}/bar/{y=prefix/*}/{z=**}</cite> <cite>x</cite> variable is single segment and <cite>y</cite> and <cite>z</cite> are multiple segments.
For a path with <cite>/foo/first/bar/prefix/second/third/fourth</cite>, <cite>x=first</cite>, <cite>y=prefix/second</cite>, <cite>z=third/fourth</cite>.
If this setting is not specified, the value defaults to <a class="reference internal" href="#envoy-v3-api-enum-value-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec-all-characters-except-reserved"><span class="std std-ref">ALL_CHARACTERS_EXCEPT_RESERVED</span></a>.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-request-validation-options">
<dt>request_validation_options</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions"><span class="std std-ref">extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.RequestValidationOptions</span></a>) Configure the behavior when handling requests that cannot be transcoded.</p>
<p>By default, the transcoder will silently pass through HTTP requests that are malformed.
This includes requests with unknown query parameters, unregister paths, etc.</p>
<p>Set these options to enable strict HTTP request validation, resulting in the transcoder rejecting
such requests with a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">4xx</span></code>. See each individual option for more details on the validation.
gRPC requests will still silently pass through without transcoding.</p>
<p>The benefit is a proper error message to the downstream.
If the upstream is a gRPC server, it cannot handle the passed-through HTTP requests and will reset
the TCP connection. The downstream will then
receive a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">503</span> <span class="pre">Service</span> <span class="pre">Unavailable</span></code> due to the upstream connection reset.
This incorrect error message may conflict with other Envoy components, such as retry policies.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions">
<span id="envoy-v3-api-msg-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions"></span><h2>extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.PrintOptions<a class="headerlink" href="#extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.18.4/api/envoy/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto#L46">[extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.PrintOptions proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;add_whitespace&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;always_print_primitive_fields&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;always_print_enums_as_ints&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;preserve_proto_field_names&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions-add-whitespace">
<dt>add_whitespace</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to add spaces, line breaks and indentation to make the JSON
output easy to read. Defaults to false.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions-always-print-primitive-fields">
<dt>always_print_primitive_fields</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to always print primitive fields. By default primitive
fields with default values will be omitted in JSON output. For
example, an int32 field set to 0 will be omitted. Setting this flag to
true will override the default behavior and print primitive fields
regardless of their values. Defaults to false.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions-always-print-enums-as-ints">
<dt>always_print_enums_as_ints</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to always print enums as ints. By default they are rendered
as strings. Defaults to false.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-printoptions-preserve-proto-field-names">
<dt>preserve_proto_field_names</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to preserve proto field names. By default protobuf will
generate JSON field names using the <code class="docutils literal notranslate"><span class="pre">json_name</span></code> option, or lower camel case,
in that order. Setting this flag will preserve the original field names. Defaults to false.</p>
</dd>
</dl>
</div>
<div class="section" id="extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions">
<span id="envoy-v3-api-msg-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions"></span><h2>extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.RequestValidationOptions<a class="headerlink" href="#extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.18.4/api/envoy/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto#L71">[extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.RequestValidationOptions proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;reject_unknown_method&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;reject_unknown_query_parameters&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions-reject-unknown-method">
<dt>reject_unknown_method</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) By default, a request that cannot be mapped to any specified gRPC
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-services"><span class="std std-ref">services</span></a>
will pass-through this filter.
When set to true, the request will be rejected with a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></code>.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-requestvalidationoptions-reject-unknown-query-parameters">
<dt>reject_unknown_query_parameters</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) By default, a request with query parameters that cannot be mapped to the gRPC request message
will pass-through this filter.
When set to true, the request will be rejected with a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></code>.</p>
<p>The fields
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-ignore-unknown-query-parameters"><span class="std std-ref">ignore_unknown_query_parameters</span></a>
and
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-ignored-query-parameters"><span class="std std-ref">ignored_query_parameters</span></a>
have priority over this strict validation behavior.</p>
</dd>
</dl>
</div>
<div class="section" id="enum-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec">
<span id="envoy-v3-api-enum-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec"></span><h2>Enum extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.UrlUnescapeSpec<a class="headerlink" href="#enum-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.18.4/api/envoy/extensions/filters/http/grpc_json_transcoder/v3/transcoder.proto#L30">[extensions.filters.http.grpc_json_transcoder.v3.GrpcJsonTranscoder.UrlUnescapeSpec proto]</a></p>
<dl class="simple" id="envoy-v3-api-enum-value-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec-all-characters-except-reserved">
<dt>ALL_CHARACTERS_EXCEPT_RESERVED</dt><dd><p><em>(DEFAULT)</em> ⁣URL path parameters will not decode RFC 6570 reserved characters.
For example, segment <cite>%2f%23/%20%2523</cite> is unescaped to <cite>%2f%23/ %23</cite>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec-all-characters-except-slash">
<dt>ALL_CHARACTERS_EXCEPT_SLASH</dt><dd><p>⁣URL path parameters will be fully URI-decoded except in
cases of single segment matches in reserved expansion, where “%2F” will be
left encoded.
For example, segment <cite>%2f%23/%20%2523</cite> is unescaped to <cite>%2f#/ %23</cite>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-enum-value-extensions-filters-http-grpc-json-transcoder-v3-grpcjsontranscoder-urlunescapespec-all-characters">
<dt>ALL_CHARACTERS</dt><dd><p>⁣URL path parameters will be fully URI-decoded.
For example, segment <cite>%2f%23/%20%2523</cite> is unescaped to <cite>/#/ %23</cite>.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../grpc_stats/v3/config.proto.html" class="btn btn-neutral float-right" title="gRPC statistics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../../grpc_http1_reverse_bridge/v3/config.proto.html" class="btn btn-neutral float-left" title="gRPC HTTP/1.1 Reverse Bridge" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-2021, Envoy Project Authors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>